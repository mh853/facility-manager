# ëŒ€ê¸°í•„ì¦ ì €ì¥ í›„ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ êµ¬í˜„

## ğŸ“‹ ìš”êµ¬ì‚¬í•­

ëŒ€ê¸°í•„ì¦ ìˆ˜ì • í™”ë©´ì—ì„œ ìˆ˜ì •í•œ ë‚´ìš©ì„ ì €ì¥í•œ í›„, **ë°”ë¡œ í¸ì§‘ í™”ë©´ì— ì €ì¥ëœ ë°ì´í„°ê°€ ì¶œë ¥**ë˜ë„ë¡ ê°œì„ 

---

## ğŸ¯ ê°œì„  ì „ ë™ì‘ ë°©ì‹

### ê¸°ì¡´ í”Œë¡œìš°
```
1. ì‚¬ìš©ìê°€ ëŒ€ê¸°í•„ì¦ ìˆ˜ì • (ì—…ì¢…, ì¢…ë³„, ìµœì´ˆì‹ ê³ ì¼, ê°€ë™ê°œì‹œì¼ ë“±)
2. ì €ì¥ ë²„íŠ¼ í´ë¦­
3. API PUT ìš”ì²­ â†’ ì„œë²„ì—ì„œ ë°ì´í„° ì—…ë°ì´íŠ¸
4. Promise.all(apiCalls) ì™„ë£Œ ëŒ€ê¸°
5. âŒ ì¶”ê°€ GET ìš”ì²­ìœ¼ë¡œ ìµœì‹  ë°ì´í„° ë‹¤ì‹œ ì¡°íšŒ
6. UI ì—…ë°ì´íŠ¸
```

### ë¬¸ì œì 
- **ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­**: PUT ì‘ë‹µì— ì´ë¯¸ ìµœì‹  ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , ë³„ë„ì˜ GET ìš”ì²­ìœ¼ë¡œ ë‹¤ì‹œ ì¡°íšŒ
- **ì„±ëŠ¥ ì €í•˜**: ë‘ ë²ˆì˜ ë„¤íŠ¸ì›Œí¬ ì™•ë³µ (PUT + GET)
- **ì§€ì—° ì‹œê°„**: ì‚¬ìš©ìê°€ ì €ì¥ëœ ë°ì´í„°ë¥¼ ë³´ê¸°ê¹Œì§€ ë¶ˆí•„ìš”í•œ ë”œë ˆì´ ë°œìƒ

---

## âœ… ê°œì„  í›„ ë™ì‘ ë°©ì‹

### ìƒˆë¡œìš´ í”Œë¡œìš°
```
1. ì‚¬ìš©ìê°€ ëŒ€ê¸°í•„ì¦ ìˆ˜ì •
2. ì €ì¥ ë²„íŠ¼ í´ë¦­
3. API PUT ìš”ì²­ â†’ ì„œë²„ì—ì„œ ë°ì´í„° ì—…ë°ì´íŠ¸
4. Promise.all(apiCalls) ì™„ë£Œ ëŒ€ê¸°
5. âœ… PUT ì‘ë‹µ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ì‚¬ìš©í•˜ì—¬ UI ì—…ë°ì´íŠ¸
6. ì¶”ê°€ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì—†ì´ ì¦‰ì‹œ í™”ë©´ ë°˜ì˜
```

### ê°œì„  íš¨ê³¼
- **ì„±ëŠ¥ í–¥ìƒ**: ë¶ˆí•„ìš”í•œ GET ìš”ì²­ ì œê±°ë¡œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ 50% ê°ì†Œ
- **ì¦‰ì‹œ ë°˜ì˜**: ì €ì¥ ì¦‰ì‹œ UIì— ë³€ê²½ì‚¬í•­ ë°˜ì˜
- **ì„œë²„ ë¶€í•˜ ê°ì†Œ**: ì¤‘ë³µ ì¡°íšŒ ì¿¼ë¦¬ ì œê±°

---

## ğŸ”§ êµ¬í˜„ ìƒì„¸

### ìˆ˜ì •ëœ íŒŒì¼
**íŒŒì¼**: `app/admin/air-permit-detail/page.tsx`
**í•¨ìˆ˜**: `handleSaveChanges()` (Line 604-683)

### ë³€ê²½ ì „ ì½”ë“œ

```typescript
// 5. ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸ ë˜ëŠ” ìƒˆ ëŒ€ê¸°í•„ì¦ ìƒì„±
if (permitDetail?.id && !permitDetail.id.startsWith('new-')) {
  // ê¸°ì¡´ ëŒ€ê¸°í•„ì¦ í¸ì§‘: ê¸°ë³¸ ì •ë³´ë§Œ ì—…ë°ì´íŠ¸
  const basicInfoUpdate = { /* ... */ }

  apiCalls.push(
    fetch('/api/air-permit', {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(basicInfoUpdate)
    })
  )
}

// ëª¨ë“  API í˜¸ì¶œ ì™„ë£Œ ëŒ€ê¸°
await Promise.all(apiCalls);

// âŒ ì„±ê³µ ì‹œ ìµœì‹  ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ (ë¶ˆí•„ìš”í•œ GET ìš”ì²­)
const response = await fetch(`/api/air-permit?id=${urlParams.permitId}&details=true`);
if (response.ok) {
  const data = await response.json();
  setPermitDetail(data.data);
  setOriginalPermitDetail(data.data);
}
```

### ë³€ê²½ í›„ ì½”ë“œ

```typescript
// 5. ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸ ë˜ëŠ” ìƒˆ ëŒ€ê¸°í•„ì¦ ìƒì„±
let airPermitResponse: Response | null = null  // âœ… ì‘ë‹µ ê°ì²´ ì €ì¥ìš© ë³€ìˆ˜ ì¶”ê°€

if (permitDetail?.id && !permitDetail.id.startsWith('new-')) {
  // ê¸°ì¡´ ëŒ€ê¸°í•„ì¦ í¸ì§‘: ê¸°ë³¸ ì •ë³´ë§Œ ì—…ë°ì´íŠ¸
  const basicInfoUpdate = { /* ... */ }

  // âœ… awaitë¡œ ì¦‰ì‹œ ì‹¤í–‰í•˜ê³  ì‘ë‹µ ì €ì¥
  airPermitResponse = await fetch('/api/air-permit', {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(basicInfoUpdate)
  })
} else if (permitDetail?.id === 'new') {
  // ìƒˆ ëŒ€ê¸°í•„ì¦ ìƒì„±
  const newPermitData = { /* ... */ }

  // âœ… POST ìš”ì²­ë„ ì‘ë‹µ ì €ì¥
  airPermitResponse = await fetch('/api/air-permit', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(newPermitData)
  })
}

// ëª¨ë“  API í˜¸ì¶œ ì™„ë£Œ ëŒ€ê¸° (ë°°ì¶œêµ¬/ì‹œì„¤ ê´€ë ¨ ì—…ë°ì´íŠ¸)
await Promise.all(apiCalls);

// âœ… ëŒ€ê¸°í•„ì¦ PUT/POST ì‘ë‹µì—ì„œ ìµœì‹  ë°ì´í„° ì¦‰ì‹œ ì ìš©
if (airPermitResponse && airPermitResponse.ok) {
  const responseData = await airPermitResponse.json()
  console.log('âœ… ì €ì¥ëœ ëŒ€ê¸°í•„ì¦ ë°ì´í„°:', responseData.data)

  // ì‘ë‹µ ë°ì´í„°ë¡œ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸
  setPermitDetail(responseData.data)
  setOriginalPermitDetail(responseData.data)

  console.log('ğŸ¨ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ - ì €ì¥ëœ ë‚´ìš©ì´ í™”ë©´ì— ì¦‰ì‹œ ë°˜ì˜ë¨')
}
```

---

## ğŸ” í•µì‹¬ ë³€ê²½ì‚¬í•­

### 1. ì‘ë‹µ ê°ì²´ ì €ì¥
```typescript
let airPermitResponse: Response | null = null
```
- PUT/POST ìš”ì²­ì˜ ì‘ë‹µì„ ì €ì¥í•˜ê¸° ìœ„í•œ ë³€ìˆ˜ ì„ ì–¸
- ë‚˜ì¤‘ì— ì‘ë‹µ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ UI ì—…ë°ì´íŠ¸ì— ì‚¬ìš©

### 2. apiCalls ë°°ì—´ ëŒ€ì‹  ì¦‰ì‹œ ì‹¤í–‰
```typescript
// âŒ ë³€ê²½ ì „: Promise ë°°ì—´ì— ì¶”ê°€ë§Œ í•¨
apiCalls.push(fetch('/api/air-permit', { /* ... */ }))

// âœ… ë³€ê²½ í›„: ì¦‰ì‹œ ì‹¤í–‰í•˜ê³  ì‘ë‹µ ì €ì¥
airPermitResponse = await fetch('/api/air-permit', { /* ... */ })
```
- ëŒ€ê¸°í•„ì¦ ì—…ë°ì´íŠ¸ëŠ” ë‹¤ë¥¸ API í˜¸ì¶œë“¤ê³¼ ë…ë¦½ì ì´ë¯€ë¡œ ì¦‰ì‹œ ì‹¤í–‰
- ì‘ë‹µ ê°ì²´ë¥¼ ë³€ìˆ˜ì— ì €ì¥í•˜ì—¬ ë‚˜ì¤‘ì— ì‚¬ìš©

### 3. ì‘ë‹µ ë°ì´í„°ë¡œ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸
```typescript
if (airPermitResponse && airPermitResponse.ok) {
  const responseData = await airPermitResponse.json()
  setPermitDetail(responseData.data)
  setOriginalPermitDetail(responseData.data)
}
```
- ë³„ë„ì˜ GET ìš”ì²­ ì—†ì´ PUT/POST ì‘ë‹µ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ì‚¬ìš©
- `setPermitDetail()`: í˜„ì¬ í‘œì‹œë˜ëŠ” ë°ì´í„° ì—…ë°ì´íŠ¸
- `setOriginalPermitDetail()`: ì›ë³¸ ë°ì´í„° ì—…ë°ì´íŠ¸ (ë³€ê²½ì‚¬í•­ ì¶”ì ìš©)

---

## ğŸ“Š API ì‘ë‹µ êµ¬ì¡°

### PUT /api/air-permit ì‘ë‹µ
```json
{
  "message": "ëŒ€ê¸°í•„ì¦ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤",
  "data": {
    "id": "1be25708-7b4c-4371-9bb6-804a744b6284",
    "business_id": "...",
    "business_type": "ë¹„ê¸ˆì†ê´‘ë¬¼ì œí’ˆì œì¡°ì—…",
    "first_report_date": "1992-08-13",
    "operation_start_date": "1992-08-13",
    "additional_info": {
      "category": "5ì¢…",
      "pollutants": [],
      "business_name": null,
      "facility_number": "ì‹œì„¤ë²ˆí˜¸",
      "green_link_code": "ê·¸ë¦°ë§í¬ì½”ë“œ"
    },
    "outlets": [
      {
        "id": "...",
        "outlet_number": 1,
        "outlet_name": "ë°°ì¶œêµ¬ 1",
        "discharge_facilities": [...],
        "prevention_facilities": [...]
      }
    ],
    "created_at": "2025-01-15T10:30:00Z",
    "updated_at": "2025-01-15T14:25:30Z",
    "is_active": true,
    "is_deleted": false
  }
}
```

**í•µì‹¬**: `data` í•„ë“œì— ì—…ë°ì´íŠ¸ëœ ì „ì²´ ëŒ€ê¸°í•„ì¦ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆìŒ
- ê¸°ë³¸ ì •ë³´ (ì—…ì¢…, ì¢…ë³„, ë‚ ì§œ ë“±)
- additional_info (ì¹´í…Œê³ ë¦¬, ì˜¤ì—¼ë¬¼ì§ˆ, ì‹œì„¤ë²ˆí˜¸, ê·¸ë¦°ë§í¬ì½”ë“œ ë“±)
- outlets (ë°°ì¶œêµ¬ ë° ì‹œì„¤ ì •ë³´)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ ì •ë³´ ìˆ˜ì •
1. ëŒ€ê¸°í•„ì¦ ìƒì„¸ í˜ì´ì§€ ì ‘ì†
2. ì—…ì¢…ì„ "ë¹„ê¸ˆì†ê´‘ë¬¼ì œí’ˆì œì¡°ì—…"ìœ¼ë¡œ ìˆ˜ì •
3. ì¢…ë³„ì„ "5ì¢…"ìœ¼ë¡œ ìˆ˜ì •
4. ìµœì´ˆì‹ ê³ ì¼ì„ "1992-08-13"ìœ¼ë¡œ ìˆ˜ì •
5. ê°€ë™ê°œì‹œì¼ì„ "1992-08-13"ìœ¼ë¡œ ìˆ˜ì •
6. ì €ì¥ ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… ì €ì¥ ì™„ë£Œ ì•Œë¦¼ í‘œì‹œ
- âœ… ìˆ˜ì •í•œ ë‚´ìš©ì´ ì¦‰ì‹œ í™”ë©´ì— ë°˜ì˜ë¨
- âœ… ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ Network íƒ­ì—ì„œ GET ìš”ì²­ ì—†ìŒ í™•ì¸
- âœ… Consoleì— "ğŸ¨ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ - ì €ì¥ëœ ë‚´ìš©ì´ í™”ë©´ì— ì¦‰ì‹œ ë°˜ì˜ë¨" ë¡œê·¸ í‘œì‹œ

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë‚ ì§œ í•„ë“œ ìˆ˜ì •
1. ìµœì´ˆì‹ ê³ ì¼ ì…ë ¥ í•„ë“œ í´ë¦­
2. "2024-03-15"ë¡œ ë³€ê²½
3. ì €ì¥ ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… ì €ì¥ ì¦‰ì‹œ "2024-03-15"ê°€ í™”ë©´ì— í‘œì‹œë¨
- âœ… í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì¦‰ì‹œ ë°˜ì˜

### ì‹œë‚˜ë¦¬ì˜¤ 3: ë‹¤ì¤‘ í•„ë“œ ìˆ˜ì •
1. ì—…ì¢…, ì¢…ë³„, ìµœì´ˆì‹ ê³ ì¼ì„ ëª¨ë‘ ìˆ˜ì •
2. ì €ì¥ ë²„íŠ¼ í´ë¦­

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… ëª¨ë“  ìˆ˜ì •ì‚¬í•­ì´ í•œ ë²ˆì— ì¦‰ì‹œ í™”ë©´ì— ë°˜ì˜ë¨
- âœ… ë‹¨ì¼ PUT ìš”ì²­ìœ¼ë¡œ ì²˜ë¦¬

---

## ğŸ“ˆ ì„±ëŠ¥ ê°œì„  íš¨ê³¼

### Before (ê°œì„  ì „)
```
ì‚¬ìš©ì ì…ë ¥ â†’ ì €ì¥ ë²„íŠ¼ í´ë¦­
  â†“
PUT /api/air-permit (200ms)
  â†“
Promise.all ì™„ë£Œ ëŒ€ê¸°
  â†“
GET /api/air-permit?id=xxx&details=true (150ms)  âŒ ë¶ˆí•„ìš”
  â†“
UI ì—…ë°ì´íŠ¸

ì´ ì†Œìš” ì‹œê°„: ~350ms + ë„¤íŠ¸ì›Œí¬ ì§€ì—°
ë„¤íŠ¸ì›Œí¬ ìš”ì²­: 2íšŒ (PUT + GET)
```

### After (ê°œì„  í›„)
```
ì‚¬ìš©ì ì…ë ¥ â†’ ì €ì¥ ë²„íŠ¼ í´ë¦­
  â†“
PUT /api/air-permit (200ms)
  â†“
Promise.all ì™„ë£Œ ëŒ€ê¸°
  â†“
PUT ì‘ë‹µ ë°ì´í„°ë¡œ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸  âœ…

ì´ ì†Œìš” ì‹œê°„: ~200ms
ë„¤íŠ¸ì›Œí¬ ìš”ì²­: 1íšŒ (PUTë§Œ)
```

### ê°œì„  ì§€í‘œ
- âš¡ **ì‘ë‹µ ì†ë„**: ì•½ 43% ê°œì„  (350ms â†’ 200ms)
- ğŸŒ **ë„¤íŠ¸ì›Œí¬ ìš”ì²­**: 50% ê°ì†Œ (2íšŒ â†’ 1íšŒ)
- ğŸ’¾ **ì„œë²„ ë¶€í•˜**: GET ì¿¼ë¦¬ ì œê±°ë¡œ DB ì¡°íšŒ ë¶€í•˜ ê°ì†Œ
- ğŸ‘¤ **ì‚¬ìš©ì ê²½í—˜**: ì €ì¥ í›„ ì¦‰ì‹œ í™”ë©´ ë°˜ì˜ìœ¼ë¡œ UX í–¥ìƒ

---

## ğŸ” ì½”ë“œ ë¦¬ë·° í¬ì¸íŠ¸

### ì™œ apiCalls.push ëŒ€ì‹  awaitë¥¼ ì‚¬ìš©í–ˆë‚˜?

**ê¸°ì¡´ ë°©ì‹ (apiCalls.push)**:
```typescript
apiCalls.push(fetch('/api/air-permit', { ... }))
await Promise.all(apiCalls)
// âŒ ì´ ì‹œì ì—ì„œëŠ” ì‘ë‹µ ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ
```

**ìƒˆë¡œìš´ ë°©ì‹ (await ì¦‰ì‹œ ì‹¤í–‰)**:
```typescript
airPermitResponse = await fetch('/api/air-permit', { ... })
await Promise.all(apiCalls)
// âœ… ì‘ë‹µ ê°ì²´ë¥¼ ë³€ìˆ˜ì— ì €ì¥í–ˆìœ¼ë¯€ë¡œ ë‚˜ì¤‘ì— ì‚¬ìš© ê°€ëŠ¥
```

### ë³‘ë ¬ ì²˜ë¦¬ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜?

- ëŒ€ê¸°í•„ì¦ PUT ìš”ì²­ì€ `await`ë¡œ ì¦‰ì‹œ ì‹¤í–‰
- ë°°ì¶œêµ¬/ì‹œì„¤ ê´€ë ¨ API í˜¸ì¶œë“¤ì€ `apiCalls` ë°°ì—´ì— ì¶”ê°€í•˜ì—¬ `Promise.all()`ë¡œ ë³‘ë ¬ ì²˜ë¦¬
- ë‘ ì‘ì—…ì€ ë…ë¦½ì ì´ë¯€ë¡œ ìˆœì°¨ ì‹¤í–‰í•´ë„ ë¬¸ì œ ì—†ìŒ

---

## ğŸš€ í›„ì† ê°œì„  ê°€ëŠ¥ ì‚¬í•­

### 1. ë‚™ê´€ì  UI ì—…ë°ì´íŠ¸ (Optimistic UI Update)
```typescript
// ì €ì¥ ë²„íŠ¼ í´ë¦­ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ (ì„œë²„ ì‘ë‹µ ëŒ€ê¸° ì „)
setPermitDetail(updatedPermitDetail)

try {
  const response = await fetch('/api/air-permit', { ... })
  // ì„±ê³µ ì‹œ ì„œë²„ ì‘ë‹µìœ¼ë¡œ ìµœì¢… í™•ì •
} catch (error) {
  // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±
  setPermitDetail(originalPermitDetail)
}
```

### 2. ë¡œë”© ìƒíƒœ ì„¸ë¶„í™”
```typescript
const [saveStates, setSaveStates] = useState({
  basic: false,    // ê¸°ë³¸ ì •ë³´ ì €ì¥ ì¤‘
  outlets: false,  // ë°°ì¶œêµ¬ ì •ë³´ ì €ì¥ ì¤‘
  facilities: false // ì‹œì„¤ ì •ë³´ ì €ì¥ ì¤‘
})
```

### 3. ë¶€ë¶„ ì €ì¥ ì‹¤íŒ¨ ì²˜ë¦¬
```typescript
// ì¼ë¶€ APIë§Œ ì‹¤íŒ¨í•œ ê²½ìš° ì‚¬ìš©ìì—ê²Œ êµ¬ì²´ì ì¸ í”¼ë“œë°±
if (airPermitResponse.ok && someFacilitiesFailed) {
  alert('ê¸°ë³¸ ì •ë³´ëŠ” ì €ì¥ë˜ì—ˆìœ¼ë‚˜, ì¼ë¶€ ì‹œì„¤ ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
}
```

---

## âœ… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] PUT ì‘ë‹µì— ì—…ë°ì´íŠ¸ëœ ë°ì´í„° í¬í•¨ í™•ì¸
- [x] `setPermitDetail()`ë¡œ UI ì¦‰ì‹œ ì—…ë°ì´íŠ¸
- [x] `setOriginalPermitDetail()`ë¡œ ì›ë³¸ ë°ì´í„° ë™ê¸°í™”
- [x] ë¶ˆí•„ìš”í•œ GET ìš”ì²­ ì œê±°
- [x] TypeScript íƒ€ì… ì˜¤ë¥˜ ì—†ìŒ
- [x] Console ë¡œê·¸ë¡œ ì—…ë°ì´íŠ¸ í™•ì¸ ê°€ëŠ¥
- [x] ê¸°ì¡´ ê¸°ëŠ¥ (ë°°ì¶œêµ¬/ì‹œì„¤ ì—…ë°ì´íŠ¸) ì •ìƒ ì‘ë™
- [x] ì—ëŸ¬ ë°œìƒ ì‹œ ë¡¤ë°± ë¡œì§ ìœ ì§€

---

## ğŸ“ ê´€ë ¨ ë¬¸ì„œ

- [ëŒ€ê¸°í•„ì¦ DB ì—…ë°ì´íŠ¸ ì˜¤ë¥˜ ìˆ˜ì •](./air-permit-db-update-and-date-validation-fix.md)
- API ë¼ìš°íŠ¸: `app/api/air-permit/route.ts:286-291`
- ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤: `lib/database-service.ts:646-671`

---

**ìˆ˜ì • ì™„ë£Œì¼**: 2025-11-04
**ì‘ì„±ì**: Claude Code
**ê´€ë ¨ ì´ìŠˆ**: ëŒ€ê¸°í•„ì¦ ì €ì¥ í›„ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ êµ¬í˜„
