# ìˆ˜ë™ ë³´ì¡°ê¸ˆ ê³µê³  ë“±ë¡ - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ“ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (Next.js)                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  /admin/subsidy Page                                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ DashboardStats                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ FilterBar (+ "ìˆ˜ë™/í¬ë¡¤ë§" í•„í„°)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ ğŸ†• ManualUploadButton                                â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ ManualUploadModal                               â”‚  â”‚
â”‚  â”‚  â”‚       â””â”€ ManualUploadForm                            â”‚  â”‚
â”‚  â”‚  â””â”€ AnnouncementList                                    â”‚  â”‚
â”‚  â”‚      â””â”€ AnnouncementCard                                â”‚  â”‚
â”‚  â”‚          â”œâ”€ ğŸ†• SourceBadge (ìˆ˜ë™/í¬ë¡¤ë§)                 â”‚  â”‚
â”‚  â”‚          â””â”€ RelevanceScore (100% / AIë¶„ì„)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â”‚ HTTP Request                        â”‚
â”‚                           â–¼                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Layer (Next.js)                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ†• POST /api/subsidy-announcements/manual                â”‚  â”‚
â”‚  â”‚  â”œâ”€ ì¸ì¦ í™•ì¸ (Bearer Token)                             â”‚  â”‚
â”‚  â”‚  â”œâ”€ ê¶Œí•œ ê²€ì¦ (permission_level >= 4)                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ í•„ìˆ˜ í•„ë“œ ê²€ì¦                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ region_code ë§¤í•‘                                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ ìë™ í•„ë“œ ì„¤ì •:                                      â”‚  â”‚
â”‚  â”‚  â”‚   - is_manual: true                                   â”‚  â”‚
â”‚  â”‚  â”‚   - is_relevant: true                                 â”‚  â”‚
â”‚  â”‚  â”‚   - relevance_score: 1.00                             â”‚  â”‚
â”‚  â”‚  â”‚   - created_by: user.id                               â”‚  â”‚
â”‚  â”‚  â””â”€ Supabase INSERT                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  GET /api/subsidy-announcements                          â”‚  â”‚
â”‚  â”‚  â””â”€ í•„í„° ì¶”ê°€: filterSource (all/manual/crawled)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â”‚ SQL Query                           â”‚
â”‚                           â–¼                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Database (Supabase)                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  subsidy_announcements í…Œì´ë¸”                             â”‚  â”‚
â”‚  â”‚  â”œâ”€ ğŸ†• is_manual: BOOLEAN (ìˆ˜ë™ ë“±ë¡ ì—¬ë¶€)                â”‚  â”‚
â”‚  â”‚  â”œâ”€ ğŸ†• created_by: UUID (ë“±ë¡ì ID)                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ relevance_score: DECIMAL (ìˆ˜ë™=1.00, AI=0.00-1.00)  â”‚  â”‚
â”‚  â”‚  â”œâ”€ is_relevant: BOOLEAN (ìˆ˜ë™=true, AI=true/false)     â”‚  â”‚
â”‚  â”‚  â”œâ”€ crawled_at: TIMESTAMP (ìˆ˜ë™=null, AI=timestamp)     â”‚  â”‚
â”‚  â”‚  â””â”€ ... (ê¸°ì¡´ í•„ë“œë“¤)                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  RLS ì •ì±…                                                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ INSERT: permission_level >= 4 (ê´€ë¦¬ìë§Œ)            â”‚  â”‚
â”‚  â”‚  â”œâ”€ UPDATE: created_by = auth.uid() (ë³¸ì¸ë§Œ)            â”‚  â”‚
â”‚  â”‚  â””â”€ SELECT: authenticated (ëª¨ë“  ì¸ì¦ ì‚¬ìš©ì)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

### 1. ìˆ˜ë™ ë“±ë¡ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê´€ë¦¬ì  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚ 1. ë²„íŠ¼ í´ë¦­
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ManualUpload    â”‚
â”‚ Modal ì—´ë¦¼      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 2. í¼ ì‘ì„±
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í¼ ê²€ì¦         â”‚
â”‚ (í´ë¼ì´ì–¸íŠ¸)    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 3. ì œì¶œ
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST API        â”‚
â”‚ /manual         â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 4. ì¸ì¦ & ê¶Œí•œ í™•ì¸
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë°ì´í„° ê°€ê³µ     â”‚
â”‚ - is_manual:    â”‚
â”‚   true          â”‚
â”‚ - relevance:    â”‚
â”‚   1.00          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 5. DB INSERT
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase        â”‚
â”‚ subsidy_        â”‚
â”‚ announcements   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 6. ì‘ë‹µ
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ëª©ë¡ ê°±ì‹        â”‚
â”‚ (Realtime)      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 7. UI ì—…ë°ì´íŠ¸
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìˆ˜ë™ ë°°ì§€ í‘œì‹œ  â”‚
â”‚ ê´€ë ¨ë„ 100%     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. í¬ë¡¤ë§ ë“±ë¡ í”Œë¡œìš° (ê¸°ì¡´)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í¬ë¡¤ëŸ¬      â”‚
â”‚ (GitHub     â”‚
â”‚  Actions)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. í¬ë¡¤ë§ ì‹¤í–‰
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI ë¶„ì„     â”‚
â”‚ (Gemini)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 2. ê´€ë ¨ë„ ë¶„ì„
       â”‚    (0.00-1.00)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST API    â”‚
â”‚ /direct     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 3. DB INSERT
       â”‚    - is_manual: false
       â”‚    - relevance: 0.00-1.00
       â”‚    - crawled_at: NOW()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
app/admin/subsidy/
â”‚
â”œâ”€ page.tsx (ë©”ì¸ í˜ì´ì§€)
â”‚  â”œâ”€ DashboardStats (í†µê³„)
â”‚  â”œâ”€ FilterBar
â”‚  â”‚  â””â”€ ğŸ†• SourceFilter (ìˆ˜ë™/í¬ë¡¤ë§ í•„í„°)
â”‚  â”œâ”€ ğŸ†• ManualUploadButton
â”‚  â”‚  â””â”€ onClick â†’ openModal()
â”‚  â””â”€ AnnouncementList
â”‚     â””â”€ AnnouncementCard
â”‚        â”œâ”€ ğŸ†• SourceBadge
â”‚        â””â”€ RelevanceDisplay
â”‚
â””â”€ components/
   â””â”€ ğŸ†• ManualUploadModal.tsx
      â”œâ”€ Modal Container
      â””â”€ ManualUploadForm.tsx
         â”œâ”€ RegionNameInput (í•„ìˆ˜)
         â”œâ”€ TitleInput (í•„ìˆ˜)
         â”œâ”€ SourceUrlInput (í•„ìˆ˜)
         â”œâ”€ ContentTextarea
         â”œâ”€ DateRangePicker (ì‹ ì²­ê¸°ê°„)
         â”œâ”€ BudgetInputs (ì˜ˆì‚°/ì§€ì›ê¸ˆì•¡)
         â”œâ”€ TargetTextarea (ì§€ì›ëŒ€ìƒ)
         â”œâ”€ PublishedDatePicker
         â”œâ”€ NotesTextarea
         â””â”€ SubmitButton
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ERD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ subsidy_announcements                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                  UUID PK           â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€ ì§€ìì²´ ì •ë³´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ region_code       VARCHAR(10)  â”‚   â”‚
â”‚ â”‚ region_name       VARCHAR(100) â”‚   â”‚
â”‚ â”‚ region_type       VARCHAR(20)  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€ ê³µê³  ì •ë³´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ title             VARCHAR(500) â”‚   â”‚
â”‚ â”‚ content           TEXT         â”‚   â”‚
â”‚ â”‚ source_url        VARCHAR(1000)â”‚   â”‚ UNIQUE
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€ ì‹ ì²­ ì •ë³´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ application_period_start DATE  â”‚   â”‚
â”‚ â”‚ application_period_end   DATE  â”‚   â”‚
â”‚ â”‚ budget            VARCHAR(100) â”‚   â”‚
â”‚ â”‚ support_amount    VARCHAR(200) â”‚   â”‚
â”‚ â”‚ target_description TEXT        â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€ ë©”íƒ€ë°ì´í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ is_relevant       BOOLEAN      â”‚   â”‚ INDEX
â”‚ â”‚ relevance_score   DECIMAL(3,2) â”‚   â”‚
â”‚ â”‚ keywords_matched  TEXT[]       â”‚   â”‚
â”‚ â”‚ ğŸ†• is_manual      BOOLEAN      â”‚   â”‚ INDEX (ì‹ ê·œ)
â”‚ â”‚ ğŸ†• created_by     UUID FK      â”‚   â”‚ (ì‹ ê·œ)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€ ìƒíƒœ ê´€ë¦¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ status            VARCHAR(20)  â”‚   â”‚ INDEX
â”‚ â”‚ is_read           BOOLEAN      â”‚   â”‚
â”‚ â”‚ notes             TEXT         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚
â”‚ â”Œâ”€ íƒ€ì„ìŠ¤íƒ¬í”„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ published_at      TIMESTAMPTZ  â”‚   â”‚
â”‚ â”‚ crawled_at        TIMESTAMPTZ  â”‚   â”‚ (ìˆ˜ë™=null)
â”‚ â”‚ created_at        TIMESTAMPTZ  â”‚   â”‚
â”‚ â”‚ updated_at        TIMESTAMPTZ  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ FK (created_by)
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ auth.users                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                  UUID PK           â”‚
â”‚ email               VARCHAR           â”‚
â”‚ user_metadata       JSONB             â”‚
â”‚   â””â”€ permission_level: INTEGER       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ê¶Œí•œ ë° ë³´ì•ˆ

### ê¶Œí•œ ë ˆë²¨ ë§¤íŠ¸ë¦­ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê¸°ëŠ¥         â”‚ Level 1 â”‚ Level 2 â”‚ Level 3 â”‚ Level 4 â”‚
â”‚              â”‚ (ì¼ë°˜)  â”‚ (ê¸°ì‚¬)  â”‚ (ì£¼ì„)  â”‚ (ê´€ë¦¬ì)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ê³µê³  ì¡°íšŒ    â”‚   âœ…    â”‚   âœ…    â”‚   âœ…    â”‚   âœ…    â”‚
â”‚ ê³µê³  ì½ìŒ    â”‚   âœ…    â”‚   âœ…    â”‚   âœ…    â”‚   âœ…    â”‚
â”‚ ìƒíƒœ ë³€ê²½    â”‚   âŒ    â”‚   âŒ    â”‚   âœ…    â”‚   âœ…    â”‚
â”‚ ğŸ†• ìˆ˜ë™ ë“±ë¡ â”‚   âŒ    â”‚   âŒ    â”‚   âŒ    â”‚   âœ…    â”‚
â”‚ ğŸ†• ê³µê³  ìˆ˜ì • â”‚   âŒ    â”‚   âŒ    â”‚   âŒ    â”‚   âœ…    â”‚
â”‚ ğŸ†• ê³µê³  ì‚­ì œ â”‚   âŒ    â”‚   âŒ    â”‚   âŒ    â”‚   âœ…    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RLS ì •ì±… íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì ìš”ì²­ â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JWT í† í° ê²€ì¦   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      YES
â”‚ authenticated?  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
       â”‚ NO                  â–¼
       â–¼                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ SELECT:     â”‚
â”‚ 401 Error   â”‚        â”‚ í—ˆìš©        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ INSERT/UPDATE?   â”‚
                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                       â”‚ YES     â”‚ NO
                       â–¼         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”
              â”‚ Level >= 4?â”‚   â”‚ í—ˆìš© â”‚
              â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜
                â”‚ YES    â”‚ NO
                â–¼        â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
           â”‚ í—ˆìš© â”‚  â”‚ 403  â”‚
           â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š í†µê³„ ì—…ë°ì´íŠ¸

### ëŒ€ì‹œë³´ë“œ í†µê³„ í™•ì¥

```typescript
interface SubsidyDashboardStats {
  // ê¸°ì¡´ í•„ë“œ
  total_announcements: number;
  relevant_announcements: number;
  unread_count: number;
  new_this_week: number;
  expiring_soon: number;
  by_status: Record<AnnouncementStatus, number>;
  by_region_type: Record<RegionType, number>;

  // ğŸ†• ìˆ˜ë™/í¬ë¡¤ë§ êµ¬ë¶„ í†µê³„
  by_source: {
    manual: number;      // ìˆ˜ë™ ë“±ë¡
    crawled: number;     // ìë™ í¬ë¡¤ë§
  };

  // ğŸ†• ìˆ˜ë™ ë“±ë¡ ìµœê·¼ ì¶”ì´
  manual_this_week: number;
  manual_this_month: number;
}
```

### SQL ì¿¼ë¦¬ ì˜ˆì‹œ

```sql
-- ìˆ˜ë™/í¬ë¡¤ë§ êµ¬ë¶„ í†µê³„
SELECT
  COUNT(*) FILTER (WHERE is_manual = true) as manual_count,
  COUNT(*) FILTER (WHERE is_manual = false) as crawled_count,
  COUNT(*) FILTER (WHERE is_manual = true AND created_at >= NOW() - INTERVAL '7 days') as manual_this_week,
  COUNT(*) FILTER (WHERE is_manual = true AND created_at >= NOW() - INTERVAL '30 days') as manual_this_month
FROM subsidy_announcements;
```

---

## ğŸ¨ UI ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

### ìƒ‰ìƒ ì‹œìŠ¤í…œ

```css
/* ìˆ˜ë™ ë“±ë¡ */
.manual-badge {
  background: #f3e8ff;  /* purple-100 */
  color: #6b21a8;       /* purple-800 */
}

.manual-score {
  color: #7c3aed;       /* purple-600 */
}

/* í¬ë¡¤ë§ */
.crawled-badge {
  background: #f3f4f6;  /* gray-100 */
  color: #4b5563;       /* gray-600 */
}

.ai-score {
  color: #2563eb;       /* blue-600 */
}
```

### ì•„ì´ì½˜ ì‹œìŠ¤í…œ

```
ìˆ˜ë™ ë“±ë¡: âœï¸ (writing hand)
í¬ë¡¤ë§:   ğŸ¤– (robot)
100%:     â­ (star)
AIë¶„ì„:   ğŸ§  (brain)
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

```
API Tests
â”œâ”€ POST /api/subsidy-announcements/manual
â”‚  â”œâ”€ âœ… ì •ìƒ ë“±ë¡ (201)
â”‚  â”œâ”€ âœ… í•„ìˆ˜ í•„ë“œ ëˆ„ë½ (400)
â”‚  â”œâ”€ âœ… ê¶Œí•œ ë¶€ì¡± (403)
â”‚  â”œâ”€ âœ… ì¤‘ë³µ URL (409)
â”‚  â””â”€ âœ… relevance_score ìë™ 1.00

UI Tests
â”œâ”€ ManualUploadModal
â”‚  â”œâ”€ âœ… ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
â”‚  â”œâ”€ âœ… í¼ ê²€ì¦
â”‚  â”œâ”€ âœ… ì œì¶œ ì„±ê³µ
â”‚  â””â”€ âœ… ì—ëŸ¬ í‘œì‹œ

Integration Tests
â”œâ”€ âœ… ì „ì²´ ë“±ë¡ í”Œë¡œìš°
â”œâ”€ âœ… ëª©ë¡ ê°±ì‹ 
â”œâ”€ âœ… í•„í„° ë™ì‘
â””â”€ âœ… ë°°ì§€ í‘œì‹œ
```

---

## ğŸ“ˆ ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### ìµœì í™” ì „ëµ

1. **ìºì‹±**
   - ì§€ìì²´ ëª©ë¡ ìºì‹± (region_code ë§¤í•‘)
   - ì‚¬ìš©ì ê¶Œí•œ ìºì‹± (5ë¶„)

2. **ì¸ë±ì‹±**
   - `is_manual` ì¸ë±ìŠ¤ (í•„í„° ì„±ëŠ¥)
   - `created_by` ì¸ë±ìŠ¤ (ìˆ˜ì •ì ì¡°íšŒ)

3. **í´ë¼ì´ì–¸íŠ¸ ìµœì í™”**
   - í¼ debouncing (ê²€ì¦)
   - Optimistic UI ì—…ë°ì´íŠ¸

4. **API ìµœì í™”**
   - ë°°ì¹˜ ì²˜ë¦¬ ê³ ë ¤ (ì¶”í›„)
   - í˜ì´ì§€ë„¤ì´ì…˜ ìœ ì§€
