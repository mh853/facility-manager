# 라우터 재고 업로드 템플릿

## Excel 형식 (복사-붙여넣기용)

```
상품명	S/N	MAC 주소	IMEI	출고일	할당 사업장
ME-I71KT	5540605	40270B083FBD	355137055406053	2025-03-25	한국정상화성(주)
ME-I71KT	5540606	40270B083FBE	355137055406054	2025-03-25	(주)덕성화학
TC720	1234567	AA:BB:CC:DD:EE:FF	123456789012345	2025-01-15
```

## 컬럼 설명

### 필수 항목
- **상품명**: 라우터 모델명 (예: ME-I71KT, TC720)
- **S/N**: 시리얼 넘버 (중복 불가, 고유값)

### 선택 항목
- **MAC 주소**: 콜론(:) 있어도 되고 없어도 됨
- **IMEI**: 15자리 숫자
- **출고일**: YYYY-MM-DD 형식
- **할당 사업장**: 사업장 이름 입력
  - 입력하면 자동으로 할당됨 (상태가 'assigned'로 변경)
  - 비워두면 재고 상태('in_stock')로 등록됨
  - **신규 사업장 자동 생성**: DB에 없는 사업장 이름을 입력하면 자동으로 생성됩니다
  - 추가 정보(사업자번호 등)는 나중에 사업장 관리에서 입력 가능

### 자동 설정 항목
- **공급업체**: 상품명 기반 자동 설정 (입력 불필요)
  - ME-I71KT → 가이아씨앤에스
  - TC720 → 크린어스

## 업로드 순서

1. **Excel에서 데이터 복사**
   - 헤더 포함해서 복사 (상품명, S/N, ...)
   - 또는 데이터만 복사 (ME-I71KT, 5540605, ...)

2. **라우터 관리 페이지에서 "추가" 버튼 클릭**

3. **텍스트 영역에 붙여넣기 (Ctrl+V)**

4. **"데이터 파싱" 버튼 클릭**
   - 에러가 있으면 수정
   - 파싱 성공하면 미리보기 테이블 표시

5. **"X개 추가" 버튼 클릭**
   - 데이터가 저장됨
   - supplier가 자동으로 설정됨
   - 할당 사업장이 있으면 자동으로 할당됨
   - **중복 S/N이 있으면 자동으로 업데이트됨**

6. **사업장 할당 (선택사항)**
   - 업로드 시 사업장 이름을 입력하지 않은 경우만 필요
   - 각 라우터의 "편집" 버튼 클릭
   - "할당 사업장" 검색 후 선택
   - "수정" 버튼 클릭

## 중복 처리 (UPSERT)

**같은 S/N의 라우터를 다시 업로드하면:**
- ✅ 기존 데이터가 **자동으로 업데이트**됩니다
- ✅ 상태(status)는 유지됩니다 (단, 새로 사업장 할당하면 'assigned'로 변경)
- ✅ 할당된 사업장 정보도 유지됩니다 (새로운 사업장 입력하지 않은 경우)

**예시:**
- 처음 업로드: ME-I71KT, S/N 5540605 → 재고 상태
- 나중에 같은 S/N으로 MAC 주소 추가 → MAC 주소만 업데이트, 다른 정보는 유지

## 주의사항

❌ **하지 말아야 할 것**
- S/N 중복되지 않도록 주의하세요
- 날짜는 YYYY-MM-DD 형식으로만 입력하세요
- 공급업체 컬럼은 입력하지 마세요 (자동으로 설정됩니다)

✅ **해야 할 것**
- 상품명과 S/N은 반드시 입력하세요
- 빈 칸은 그냥 탭으로 구분해서 남겨두세요
- 사업장 할당은 6번째 컬럼(할당 사업장)에 입력하면 자동으로 됩니다
- 신규 사업장도 그냥 이름만 입력하면 자동으로 생성됩니다

## 예제

### 예제 1: 최소 정보만
```
상품명	S/N
ME-I71KT	5540605
ME-I71KT	5540606
```

### 예제 2: 전체 정보 (사업장 할당 포함)
```
상품명	S/N	MAC 주소	IMEI	출고일	할당 사업장
ME-I71KT	5540605	40270B083FBD	355137055406053	2025-03-25	한국정상화성(주)
TC720	1234567	AA:BB:CC:DD:EE:FF	123456789012345	2025-01-15	(주)덕성화학
```

### 예제 3: 중간 정보 (일부 빈 칸 + 신규 사업장)
```
상품명	S/N	MAC 주소	IMEI	출고일	할당 사업장
ME-I71KT	5540605	40270B083FBD		2025-03-25	반석산업
ME-I71KT	5540606			2025-03-25
TC720	1234567	AA:BB:CC:DD:EE:FF	123456789012345		새로운사업장(주)
```

**참고**: "새로운사업장(주)"처럼 DB에 없는 이름을 입력하면 자동으로 생성됩니다!
