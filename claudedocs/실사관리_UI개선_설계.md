# 실사관리 페이지 UI 개선 설계

## 변경 요구사항

### 1. 제거할 요소
- **사업장 선택 영역** (Line 157-181)
  - 파란색 그라데이션 박스 제거
  - "실시간 데이터 연동", "시설 사진 업로드", "통합 시설 관리" 아이콘 제거

### 2. 추가할 필터 옵션

#### 2.1 실사자명 필터
- **검색 대상**:
  - 설치 전 실사자명 (`presurvey_inspector_name`)
  - 설치자명 (`postinstall_installer_name`)
  - AS 담당자명 (`aftersales_technician_name`)
- **UI**: 드롭다운 또는 자동완성 입력
- **동작**: 해당 담당자가 배정된 사업장만 표시

#### 2.2 실사일자 필터
- **검색 대상**:
  - 설치 전 실사일 (`presurvey_inspector_date`)
  - 설치일 (`postinstall_installer_date`)
  - AS 방문일 (`aftersales_technician_date`)
- **UI**: 날짜 범위 선택 (시작일 ~ 종료일)
- **동작**: 해당 기간 내 실사가 진행된 사업장만 표시

#### 2.3 사진 등록 여부 필터
- **검색 대상**: `uploaded_files` 테이블에 사진이 있는 사업장
- **UI**: 토글 스위치 또는 체크박스
- **옵션**:
  - 전체 (기본값)
  - 사진 있음
  - 사진 없음
- **동작**: 사진 등록 상태에 따라 필터링

## 개선된 UI 구조

```
┌─────────────────────────────────────────────────────────┐
│ [Header: 실사관리]                    [새로고침 버튼]   │
├─────────────────────────────────────────────────────────┤
│                                                           │
│ ┌───────────────────────────────────────────────────┐   │
│ │ [통계 영역]                                        │   │
│ │ 등록된 사업장: 228개              실시간 연결됨    │   │
│ └───────────────────────────────────────────────────┘   │
│                                                           │
│ ┌───────────────────────────────────────────────────┐   │
│ │ [필터 영역]                                        │   │
│ │                                                     │   │
│ │ [🔍 사업장명 검색]                                  │   │
│ │                                                     │   │
│ │ [고급 필터]  ▼                                      │   │
│ │ ├─ 👤 실사자명: [전체 ▼]                            │   │
│ │ ├─ 📅 실사일자: [시작일] ~ [종료일]                  │   │
│ │ └─ 📷 사진등록: ○ 전체  ○ 있음  ○ 없음              │   │
│ │                                                     │   │
│ │ [검색 결과: 15개 / 전체 228개]                      │   │
│ └───────────────────────────────────────────────────┘   │
│                                                           │
│ ┌───────────────────────────────────────────────────┐   │
│ │ [사업장 목록]                                       │   │
│ │                                                     │   │
│ │ ┌─────────────────────────────────────────────┐   │   │
│ │ │ 🏢 (유)태현환경                               │   │   │
│ │ │    실사자: 김철수 | 실사일: 2025-01-15       │   │   │
│ │ │    📷 사진 12장 등록                          │   │   │
│ │ └─────────────────────────────────────────────┘   │   │
│ │                                                     │   │
│ │ ┌─────────────────────────────────────────────┐   │   │
│ │ │ 🏢 (유)프라티스킨인터내셔널                   │   │   │
│ │ │    실사자: 이영희 | 실사일: 2025-01-10       │   │   │
│ │ │    📷 사진 8장 등록                           │   │   │
│ │ └─────────────────────────────────────────────┘   │   │
│ │                                                     │   │
│ └───────────────────────────────────────────────────┘   │
│                                                           │
│ [푸터: 마지막 업데이트 정보]                             │
└─────────────────────────────────────────────────────────┘
```

## 데이터 구조

### API 응답 형식 (확장)

```typescript
interface BusinessWithDetails {
  business_name: string;

  // 실사자 정보
  presurvey_inspector_name?: string;
  presurvey_inspector_contact?: string;
  presurvey_inspector_date?: string;

  // 설치자 정보
  postinstall_installer_name?: string;
  postinstall_installer_contact?: string;
  postinstall_installer_date?: string;

  // AS 담당자 정보
  aftersales_technician_name?: string;
  aftersales_technician_contact?: string;
  aftersales_technician_date?: string;

  // 사진 통계
  photo_count?: number;
  has_photos?: boolean;
}
```

### 필터 State

```typescript
interface FilterState {
  searchTerm: string;
  inspectorName: string | null;  // 실사자명
  dateRange: {
    start: string | null;
    end: string | null;
  };
  photoStatus: 'all' | 'with_photos' | 'without_photos';
}
```

## 구현 단계

### Phase 1: API 확장
1. `business-list` API에 추가 정보 포함
   - 실사자 정보 (presurvey, postinstall, aftersales)
   - 사진 개수 통계
2. 필터 파라미터 추가
   - `inspector_name`: 실사자명
   - `date_from`, `date_to`: 날짜 범위
   - `photo_status`: 사진 등록 여부

### Phase 2: UI 컴포넌트
1. **FilterPanel 컴포넌트**
   - 사업장명 검색 (기존)
   - 실사자명 드롭다운
   - 날짜 범위 선택
   - 사진 등록 상태 라디오 버튼

2. **BusinessCard 컴포넌트** (개선)
   - 사업장명
   - 실사자명 + 실사일자 표시
   - 사진 개수 배지

### Phase 3: 필터링 로직
1. 클라이언트 사이드 필터링 (빠른 응답)
2. 서버 사이드 필터링 (대용량 데이터)

## 성능 고려사항

### 최적화 전략
1. **Virtual Scrolling**: 사업장 목록이 많을 경우
2. **Debouncing**: 검색 입력 지연 처리 (300ms)
3. **Memoization**: 필터링 결과 캐싱
4. **Lazy Loading**: 초기 로드 시 기본 정보만, 필터 사용 시 상세 정보 로드

### 캐싱 전략
- 실사자명 목록: 로컬 스토리지 (24시간)
- 사업장 목록: 메모리 캐시 (5분)
- 사진 통계: API 응답 캐시 (1분)

## UI/UX 개선사항

### 1. 사용성
- 필터 접기/펼치기 기능 (기본: 접힘)
- 필터 초기화 버튼
- 활성 필터 배지 표시
- 검색 결과 개수 실시간 표시

### 2. 접근성
- 키보드 네비게이션 지원
- ARIA 레이블 추가
- 화면 리더 지원

### 3. 모바일 최적화
- 터치 친화적 필터 UI
- 하단 시트 형식 필터 패널
- 스와이프 제스처 지원

## 예상 효과

### 사용자 편의성
- ✅ 실사자별 사업장 빠른 검색
- ✅ 특정 기간 실사 현황 파악
- ✅ 사진 미등록 사업장 즉시 확인

### 업무 효율성
- 🚀 검색 시간 단축: ~70% 감소 예상
- 🎯 정확한 사업장 필터링
- 📊 실시간 통계 확인

### 데이터 관리
- 📈 사진 등록 현황 모니터링
- 👥 담당자별 업무량 파악
- ⏰ 실사 일정 관리 용이
