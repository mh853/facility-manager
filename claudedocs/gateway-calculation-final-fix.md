# Gateway ê³„ì‚° ë¬¸ì œ ìµœì¢… í•´ê²°

## ðŸ“Š ìž‘ì„±ì¼
2026-01-15 18:48

## ðŸŽ¯ ë¬¸ì œ ìš”ì•½

ëŒ€ì‹œë³´ë“œ ë§¤ìž…ê¸ˆì•¡ì´ â‚©163,489,000ìœ¼ë¡œ í‘œì‹œë˜ì—ˆìœ¼ë‚˜, ì‹¤ì œ ê³„ì‚° ì‹œ â‚©337,899,000+ê°€ ë˜ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.
Gateway_1_2 ë§¤ìž…ê¸ˆì•¡ â‚©174,410,000ì´ ëˆ„ë½ë˜ê³  ìžˆì—ˆìŠµë‹ˆë‹¤.

## ðŸ” ê·¼ë³¸ ì›ì¸

**`government_pricing` í…Œì´ë¸”ì— `gateway_1_2`ì™€ `gateway_3_4` ë ˆì½”ë“œê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.**

### ì½”ë“œ ë¶„ì„

[app/api/dashboard/revenue/route.ts:314-317](app/api/dashboard/revenue/route.ts#L314-L317):
```typescript
equipmentFields.forEach(field => {
  const quantity = business[field] || 0;
  if (quantity <= 0) return;

  const priceInfo = priceMap[field];  // â† government_pricingì—ì„œ ì¡°íšŒ
  if (!priceInfo) return;  // â† gateway_1_2ê°€ ì—†ì–´ì„œ ì—¬ê¸°ì„œ ë¦¬í„´!

  // ... ê³„ì‚° ë¡œì§
});
```

### ì¦ê±°

1. âœ… `equipmentFields` ë°°ì—´ì— `gateway_1_2` í¬í•¨ë¨
2. âœ… ë°ì´í„°ë² ì´ìŠ¤ì— `gateway_1_2 = 3` ì¡´ìž¬
3. âœ… ì œì¡°ì‚¬ë³„ ì›ê°€ (`manufacturer_pricing`) ì •ìƒ
4. âŒ **ì •ë¶€ ê³ ì‹œê°€ (`government_pricing`)ì— `gateway_1_2` ì—†ìŒ**

ë””ë²„ê·¸ ë¡œê·¸ì—ì„œ:
```
[DEBUG] ðŸ” ë™ìŠ¹ê³ ë¬´ê¸°ê¸°ê³µì—…ì‚¬ gateway_1_2 í™•ì¸:
[DEBUG]   - business.gateway_1_2 raw value: 3
[DEBUG]   - business.gateway_1_2 type: number
[DEBUG]   - quantity (after || 0): 3
```

í•˜ì§€ë§Œ ë‹¤ìŒ ê³„ì‚° ë¡œê·¸ëŠ” ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ:
```
[DEBUG] âœ… Gateway_1_2 ê³„ì‚° ì¤‘: ë™ìŠ¹ê³ ë¬´ê¸°ê¸°ê³µì—…ì‚¬
```

â†’ `if (!priceInfo) return;` ì—ì„œ ë¦¬í„´ë˜ê³  ìžˆì—ˆìŒ!

## âœ… í•´ê²° ë°©ë²•

`government_pricing` í…Œì´ë¸”ì— ëˆ„ë½ëœ ë ˆì½”ë“œ ì¶”ê°€:

```sql
INSERT INTO government_pricing (equipment_type, equipment_name, official_price, manufacturer_price, installation_cost, effective_from, is_active)
VALUES
  ('gateway_1_2', 'ê²Œì´íŠ¸ì›¨ì´(1,2)', 1600000, 0, 0, '2025-01-01', true),
  ('gateway_3_4', 'ê²Œì´íŠ¸ì›¨ì´(3,4)', 1600000, 0, 0, '2025-01-01', true);
```

## ðŸ“Š ìˆ˜ì • ê²°ê³¼

### Before (ìˆ˜ì • ì „)
```
ì´ë§¤ì¶œ: â‚©1,290,720,000
ì´ë§¤ìž…: â‚©163,489,000 âŒ
ìˆœì´ìµ: â‚©ì•½ 862,038,000
ì´ìµë¥ : 66.78%
```

### After (ìˆ˜ì • í›„)
```
ì´ë§¤ì¶œ: â‚©1,290,720,000
ì´ë§¤ìž…: â‚©337,899,000 âœ…
ìˆœì´ìµ: â‚©687,628,600
ì´ìµë¥ : 53.27%
```

### ì°¨ì´
- ë§¤ìž…ê¸ˆì•¡: +â‚©174,410,000 (gateway_1_2 ë°˜ì˜)
- ì´ìµë¥ : 66.78% â†’ 53.27% (ì •ìƒí™”)

## ðŸ§ª ê²€ì¦ ê²°ê³¼

### ë™ìŠ¹ê³ ë¬´ê¸°ê¸°ê³µì—…ì‚¬ (ì œì¡°ì‚¬: í¬ë¦°ì–´ìŠ¤)

**ìž¥ë¹„ë³„ ë§¤ìž…ê¸ˆì•¡**:
- ì°¨ì••ê³„: 6ê°œ Ã— â‚©150,000 = â‚©900,000
- ì˜¨ë„ê³„: 3ê°œ Ã— â‚©70,000 = â‚©210,000
- í† ì¶œì „ë¥˜ê³„: 4ê°œ Ã— â‚©35,000 = â‚©140,000
- ì†¡í’ì „ë¥˜ê³„: 3ê°œ Ã— â‚©35,000 = â‚©105,000
- **ê²Œì´íŠ¸ì›¨ì´(1,2): 3ê°œ Ã— â‚©630,000 = â‚©1,890,000** âœ…
- ìœ ì„ VPN: 1ê°œ Ã— â‚©190,000 = â‚©190,000

**ì´ ë§¤ìž…ê¸ˆì•¡**: â‚©3,435,000 âœ…

## ðŸ“š ì°¸ê³  ì‚¬í•­

### Government Pricing vs Manufacturer Pricing

ì‹œìŠ¤í…œì€ ë‘ ê°€ì§€ ì›ê°€ í…Œì´ë¸”ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

1. **`government_pricing`**: í™˜ê²½ë¶€ ê³ ì‹œê°€ (ë§¤ì¶œ ê³„ì‚°ìš©)
2. **`manufacturer_pricing`**: ì œì¡°ì‚¬ë³„ ë§¤ìž… ì›ê°€ (ë§¤ìž… ê³„ì‚°ìš©)

ë§¤ìž…ê¸ˆì•¡ ê³„ì‚° ì‹œ:
- `government_pricing`ì—ì„œ ìž¥ë¹„ íƒ€ìž… ì¡´ìž¬ ì—¬ë¶€ í™•ì¸ (`priceMap[field]`)
- `manufacturer_pricing`ì—ì„œ ì‹¤ì œ ë§¤ìž… ì›ê°€ ì¡°íšŒ (`manufacturerCosts[field]`)

**ë”°ë¼ì„œ ìƒˆë¡œìš´ ìž¥ë¹„ íƒ€ìž…ì„ ì¶”ê°€í•  ë•ŒëŠ” ë°˜ë“œì‹œ ë‘ í…Œì´ë¸” ëª¨ë‘ì— ë ˆì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤!**

### í–¥í›„ ì¶”ê°€ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

ìƒˆë¡œìš´ ìž¥ë¹„ íƒ€ìž… ì¶”ê°€ ì‹œ:

1. âœ… `equipmentFields` ë°°ì—´ì— ì¶”ê°€
2. âœ… `government_pricing` í…Œì´ë¸”ì— ë ˆì½”ë“œ ì¶”ê°€
3. âœ… `manufacturer_pricing` í…Œì´ë¸”ì— ì œì¡°ì‚¬ë³„ ì›ê°€ ì¶”ê°€
4. âœ… ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼ ì¡´ìž¬ í™•ì¸

## ðŸŽ“ í•™ìŠµ ë‚´ìš©

### ë””ë²„ê¹… ê³¼ì •

1. **ì½”ë“œ í™•ì¸** â†’ equipmentFieldsì— gateway_1_2 ì¡´ìž¬ âœ…
2. **ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸** â†’ business_infoì— gateway_1_2 = 3 ì¡´ìž¬ âœ…
3. **ì œì¡°ì‚¬ ì›ê°€ í™•ì¸** â†’ manufacturer_pricingì— ì›ê°€ ì¡´ìž¬ âœ…
4. **ì„œë²„ ë¡œê·¸ ë¶„ì„** â†’ quantity ì²´í¬ëŠ” í†µê³¼í•˜ì§€ë§Œ ê³„ì‚° ë¡œê·¸ëŠ” ì—†ìŒ ðŸ¤”
5. **ê·¼ë³¸ ì›ì¸ ë°œê²¬** â†’ government_pricingì— ë ˆì½”ë“œ ì—†ìŒ! âŒ

### í•µì‹¬ êµí›ˆ

**ì¦ìƒ**: ì½”ë“œì— ìžˆê³ , ë°ì´í„°ì— ìžˆëŠ”ë°ë„ ê³„ì‚°ì´ ì•ˆ ë¨
**ì›ì¸**: ì¤‘ê°„ ë‹¨ê³„ì˜ ì°¸ì¡° í…Œì´ë¸” (`government_pricing`) ëˆ„ë½
**í•´ê²°**: ì‹œìŠ¤í…œì˜ ë°ì´í„° íë¦„ì„ ì™„ì „ížˆ ì´í•´í•˜ê³  ëª¨ë“  ì˜ì¡´ì„± í™•ì¸

---

**ìž‘ì„±ìž**: Claude Code
**ìµœì¢… ìˆ˜ì •**: 2026-01-15 18:48
**ìƒíƒœ**: âœ… í•´ê²° ì™„ë£Œ
