# ì‹œì„¤ ì¸¡ì •ê¸°ê¸° ê´€ë¦¬ ì‹œìŠ¤í…œ ì„¤ê³„

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### ëª©ì 
ë°°ì¶œì‹œì„¤ ë° ë°©ì§€ì‹œì„¤ì˜ ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰, ë©´ì œì‚¬ìœ , ë¹„ê³ ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œ êµ¬ì¶•

### ì£¼ìš” ê°œì„ ì‚¬í•­
1. **UX ê°œì„ **: í¸ì§‘ ë²„íŠ¼ í´ë¦­ â†’ **ì¹´ë“œ í´ë¦­**ìœ¼ë¡œ ëª¨ë‹¬ ì—´ê¸°
2. **ë°ì´í„° í™•ì¥**: ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰, ë©´ì œì‚¬ìœ , ë¹„ê³  í•„ë“œ ì¶”ê°€
3. **ì‹œìŠ¤í…œ í†µí•©**: DB ìŠ¤í‚¤ë§ˆ + API + ì»´í¬ë„ŒíŠ¸ ì™„ì „ í†µí•©

---

## ğŸ¯ ìš”êµ¬ì‚¬í•­ ë¶„ì„

### í˜„ì¬ ìƒíƒœ
- âœ… ë°°ì¶œì‹œì„¤/ë°©ì§€ì‹œì„¤ ì¹´ë“œ í‘œì‹œ (ì½ê¸° ì „ìš©)
- âœ… ì‹œì„¤ëª…, ìš©ëŸ‰, ìˆ˜ëŸ‰, ë²ˆí˜¸, ë©”ëª¨ í‘œì‹œ
- âŒ ì¸¡ì •ê¸°ê¸° ê´€ë ¨ ì •ë³´ ì—†ìŒ
- âŒ ì¹´ë“œ í´ë¦­ ë¶ˆê°€ (í¸ì§‘ ê¸°ëŠ¥ ì—†ìŒ)

### ëª©í‘œ ìƒíƒœ
- âœ… ì¹´ë“œ í´ë¦­ ì‹œ í¸ì§‘ ëª¨ë‹¬ ì—´ë¦¼
- âœ… ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰ ì…ë ¥/í‘œì‹œ
- âœ… ë©´ì œì‚¬ìœ  ì…ë ¥/í‘œì‹œ
- âœ… ë¹„ê³ (íŠ¹ì´ì‚¬í•­) ì…ë ¥/í‘œì‹œ
- âœ… DB ì €ì¥ ë° ê´€ë¦¬

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### 1. ê¸°ì¡´ í…Œì´ë¸” í™•ì¥: `outlets_facilities`

```sql
-- ì‹œì„¤ ì¸¡ì •ê¸°ê¸° ì •ë³´ ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE public.outlets_facilities
ADD COLUMN IF NOT EXISTS measurement_device_count INTEGER DEFAULT 0,
ADD COLUMN IF NOT EXISTS exemption_reason TEXT,
ADD COLUMN IF NOT EXISTS remarks TEXT,
ADD COLUMN IF NOT EXISTS last_updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
ADD COLUMN IF NOT EXISTS last_updated_by VARCHAR(100);

-- ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX IF NOT EXISTS idx_outlets_facilities_business_id
ON public.outlets_facilities(business_id);

CREATE INDEX IF NOT EXISTS idx_outlets_facilities_facility_type
ON public.outlets_facilities(facility_type);

-- ì»¬ëŸ¼ ì„¤ëª…
COMMENT ON COLUMN public.outlets_facilities.measurement_device_count IS 'ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰';
COMMENT ON COLUMN public.outlets_facilities.exemption_reason IS 'ì¸¡ì •ê¸°ê¸° ë©´ì œì‚¬ìœ ';
COMMENT ON COLUMN public.outlets_facilities.remarks IS 'ë¹„ê³ (íŠ¹ì´ì‚¬í•­)';
COMMENT ON COLUMN public.outlets_facilities.last_updated_at IS 'ìµœì¢… ìˆ˜ì • ì‹œê°';
COMMENT ON COLUMN public.outlets_facilities.last_updated_by IS 'ìµœì¢… ìˆ˜ì •ì';

-- íŠ¸ë¦¬ê±°: updated_at ìë™ ê°±ì‹ 
CREATE OR REPLACE FUNCTION update_last_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.last_updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_update_last_updated_at
BEFORE UPDATE ON public.outlets_facilities
FOR EACH ROW
EXECUTE FUNCTION update_last_updated_at();
```

### 2. ë°ì´í„° êµ¬ì¡° ì˜ˆì‹œ

```typescript
interface FacilityWithMeasurement extends Facility {
  // ê¸°ì¡´ í•„ë“œ
  number: string;
  name: string;
  capacity: string;
  quantity: number;
  outlet: number;
  notes?: string;

  // ìƒˆë¡œìš´ í•„ë“œ
  measurement_device_count: number;  // ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰
  exemption_reason?: string;          // ë©´ì œì‚¬ìœ 
  remarks?: string;                   // ë¹„ê³ (íŠ¹ì´ì‚¬í•­)
  last_updated_at?: string;
  last_updated_by?: string;
}
```

---

## ğŸ”Œ API ì„¤ê³„

### ì—”ë“œí¬ì¸íŠ¸: `/api/outlet-facility`

#### 1. GET - ì‹œì„¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ
```http
GET /api/outlet-facility?businessId={businessId}&facilityId={facilityId}
```

**ì‘ë‹µ**:
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "business_id": "uuid",
    "facility_type": "discharge",
    "outlet_number": 1,
    "facility_name": "ì„¸ì •ì‹œì„¤",
    "capacity": "1000ã¥/h",
    "quantity": 2,
    "measurement_device_count": 1,
    "exemption_reason": null,
    "remarks": "ì •ê¸°ì ê²€ í•„ìš”",
    "last_updated_at": "2025-11-06T00:00:00Z",
    "last_updated_by": "í™ê¸¸ë™"
  }
}
```

#### 2. PUT - ì‹œì„¤ ì¸¡ì •ê¸°ê¸° ì •ë³´ ì—…ë°ì´íŠ¸
```http
PUT /api/outlet-facility
Content-Type: application/json
```

**ìš”ì²­ ë³¸ë¬¸**:
```json
{
  "businessId": "uuid",
  "facilityId": "uuid",
  "measurement_device_count": 1,
  "exemption_reason": "ë°°ì¶œë†ë„ê°€ í—ˆìš©ê¸°ì¤€ì˜ 30% ì´í•˜",
  "remarks": "ë‹¤ìŒ ì ê²€ì¼: 2025-12-01"
}
```

**ì‘ë‹µ**:
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "measurement_device_count": 1,
    "exemption_reason": "ë°°ì¶œë†ë„ê°€ í—ˆìš©ê¸°ì¤€ì˜ 30% ì´í•˜",
    "remarks": "ë‹¤ìŒ ì ê²€ì¼: 2025-12-01",
    "last_updated_at": "2025-11-06T00:00:00Z"
  },
  "message": "ì‹œì„¤ ì •ë³´ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

---

## ğŸ¨ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### 1. SupabaseFacilitiesSection (ìˆ˜ì •)

#### ë³€ê²½ì‚¬í•­
```typescript
// ì¹´ë“œ í´ë¦­ í•¸ë“¤ëŸ¬ ì¶”ê°€
const [selectedFacility, setSelectedFacility] = useState<Facility | null>(null);
const [showEditModal, setShowEditModal] = useState(false);

const handleFacilityClick = (facility: Facility) => {
  setSelectedFacility(facility);
  setShowEditModal(true);
};

// ì¹´ë“œì— í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
<div
  key={index}
  className="bg-orange-50 border border-orange-200 rounded-lg p-3
             cursor-pointer hover:shadow-md hover:border-orange-300
             transition-all duration-200"
  onClick={() => handleFacilityClick(facility)}
>
  {/* ê¸°ì¡´ ë‚´ìš© */}
</div>
```

### 2. FacilityEditModal (ì‹ ê·œ ì»´í¬ë„ŒíŠ¸)

#### íŒŒì¼: `components/modals/FacilityEditModal.tsx`

```typescript
'use client';

import { useState, useEffect } from 'react';
import { X, Save, Factory, Shield, AlertCircle } from 'lucide-react';

interface FacilityEditModalProps {
  facility: Facility;
  onClose: () => void;
  onSave: (data: FacilityUpdateData) => Promise<void>;
  businessId: string;
}

interface FacilityUpdateData {
  measurement_device_count: number;
  exemption_reason: string;
  remarks: string;
}

export default function FacilityEditModal({
  facility,
  onClose,
  onSave,
  businessId
}: FacilityEditModalProps) {
  const [formData, setFormData] = useState<FacilityUpdateData>({
    measurement_device_count: facility.measurement_device_count || 0,
    exemption_reason: facility.exemption_reason || '',
    remarks: facility.remarks || ''
  });

  const [isSaving, setIsSaving] = useState(false);

  const handleSave = async () => {
    setIsSaving(true);
    try {
      await onSave(formData);
      onClose();
    } catch (error) {
      console.error('ì €ì¥ ì‹¤íŒ¨:', error);
    } finally {
      setIsSaving(false);
    }
  };

  const isDischarge = facility.type === 'discharge';
  const Icon = isDischarge ? Factory : Shield;
  const colorClass = isDischarge ? 'orange' : 'blue';

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-auto">
        {/* í—¤ë” */}
        <div className={`bg-${colorClass}-50 p-6 border-b border-${colorClass}-200`}>
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className={`p-2 bg-${colorClass}-100 rounded-lg`}>
                <Icon className={`w-6 h-6 text-${colorClass}-600`} />
              </div>
              <div>
                <h2 className="text-xl font-bold text-gray-900">
                  {facility.name}
                </h2>
                <p className="text-sm text-gray-600">
                  {isDischarge ? 'ë°°ì¶œì‹œì„¤' : 'ë°©ì§€ì‹œì„¤'} #{facility.number}
                </p>
              </div>
            </div>
            <button
              onClick={onClose}
              className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
            >
              <X className="w-5 h-5 text-gray-500" />
            </button>
          </div>
        </div>

        {/* ì‹œì„¤ ê¸°ë³¸ ì •ë³´ */}
        <div className="p-6 bg-gray-50 border-b">
          <div className="grid grid-cols-3 gap-4 text-sm">
            <div>
              <span className="text-gray-600">ë°°ì¶œêµ¬:</span>
              <span className="ml-2 font-medium">{facility.outlet}ë²ˆ</span>
            </div>
            <div>
              <span className="text-gray-600">ìš©ëŸ‰:</span>
              <span className="ml-2 font-medium">{facility.capacity}</span>
            </div>
            <div>
              <span className="text-gray-600">ìˆ˜ëŸ‰:</span>
              <span className="ml-2 font-medium">{facility.quantity}ê°œ</span>
            </div>
          </div>
        </div>

        {/* í¸ì§‘ í¼ */}
        <div className="p-6 space-y-6">
          {/* ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰ */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰ *
            </label>
            <input
              type="number"
              min="0"
              value={formData.measurement_device_count}
              onChange={(e) => setFormData({
                ...formData,
                measurement_device_count: parseInt(e.target.value) || 0
              })}
              className="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg
                         focus:outline-none focus:ring-2 focus:ring-blue-500
                         focus:border-blue-500 transition-all"
              placeholder="ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”"
            />
            <p className="text-xs text-gray-500 mt-1">
              ì´ ì‹œì„¤ì— ì„¤ì¹˜ëœ ì¸¡ì •ê¸°ê¸°ì˜ ê°œìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”
            </p>
          </div>

          {/* ë©´ì œì‚¬ìœ  */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              ì¸¡ì •ê¸°ê¸° ë©´ì œì‚¬ìœ 
            </label>
            <textarea
              value={formData.exemption_reason}
              onChange={(e) => setFormData({
                ...formData,
                exemption_reason: e.target.value
              })}
              rows={3}
              className="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg
                         focus:outline-none focus:ring-2 focus:ring-blue-500
                         focus:border-blue-500 resize-none transition-all"
              placeholder="ì¸¡ì •ê¸°ê¸° ì„¤ì¹˜ ë©´ì œì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ: ë°°ì¶œë†ë„ê°€ í—ˆìš©ê¸°ì¤€ì˜ 30% ì´í•˜"
            />
            <p className="text-xs text-gray-500 mt-1">
              ì¸¡ì •ê¸°ê¸° ì„¤ì¹˜ê°€ ë©´ì œëœ ê²½ìš° ê·¸ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”
            </p>
          </div>

          {/* ë¹„ê³ (íŠ¹ì´ì‚¬í•­) */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              ë¹„ê³  (íŠ¹ì´ì‚¬í•­)
            </label>
            <textarea
              value={formData.remarks}
              onChange={(e) => setFormData({
                ...formData,
                remarks: e.target.value
              })}
              rows={4}
              className="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg
                         focus:outline-none focus:ring-2 focus:ring-blue-500
                         focus:border-blue-500 resize-none transition-all"
              placeholder="íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ: ì •ê¸°ì ê²€ í•„ìš”, ë‹¤ìŒ ì ê²€ì¼ ë“±"
            />
            <p className="text-xs text-gray-500 mt-1">
              ì¶”ê°€ ë©”ëª¨ë‚˜ ì£¼ì˜ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”
            </p>
          </div>

          {/* ê¸°ì¡´ ë©”ëª¨ í‘œì‹œ (ìˆëŠ” ê²½ìš°) */}
          {facility.notes && (
            <div className="bg-amber-50 border border-amber-200 rounded-lg p-4">
              <div className="flex items-start gap-2">
                <AlertCircle className="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5" />
                <div>
                  <p className="text-sm font-medium text-amber-900 mb-1">
                    ê¸°ì¡´ ì‹œì„¤ ë©”ëª¨
                  </p>
                  <p className="text-sm text-amber-800">{facility.notes}</p>
                </div>
              </div>
            </div>
          )}
        </div>

        {/* í‘¸í„° */}
        <div className="p-6 bg-gray-50 border-t flex justify-end gap-3">
          <button
            onClick={onClose}
            disabled={isSaving}
            className="px-6 py-2.5 text-gray-700 bg-white border-2 border-gray-300
                       rounded-lg hover:bg-gray-50 transition-colors
                       disabled:opacity-50 disabled:cursor-not-allowed"
          >
            ì·¨ì†Œ
          </button>
          <button
            onClick={handleSave}
            disabled={isSaving}
            className="px-6 py-2.5 bg-green-600 text-white rounded-lg
                       hover:bg-green-700 transition-colors flex items-center gap-2
                       disabled:bg-green-400 disabled:cursor-not-allowed
                       shadow-md hover:shadow-lg"
          >
            {isSaving ? (
              <>
                <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin" />
                ì €ì¥ ì¤‘...
              </>
            ) : (
              <>
                <Save className="w-4 h-4" />
                ì €ì¥
              </>
            )}
          </button>
        </div>
      </div>
    </div>
  );
}
```

---

## ğŸ”„ ë°ì´í„° íë¦„

```
1. ì‚¬ìš©ì ë™ì‘: ì‹œì„¤ ì¹´ë“œ í´ë¦­
   â†“
2. ìƒíƒœ ë³€ê²½: setSelectedFacility(facility), setShowEditModal(true)
   â†“
3. ëª¨ë‹¬ ë Œë”ë§: FacilityEditModal í‘œì‹œ
   â†“
4. ì‚¬ìš©ì ì…ë ¥: ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰, ë©´ì œì‚¬ìœ , ë¹„ê³  ì…ë ¥
   â†“
5. ì €ì¥ í´ë¦­: onSave í˜¸ì¶œ
   â†“
6. API ìš”ì²­: PUT /api/outlet-facility
   â†“
7. DB ì—…ë°ì´íŠ¸: outlets_facilities í…Œì´ë¸” UPDATE
   â†“
8. ì‘ë‹µ ì²˜ë¦¬: ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ, ëª¨ë‹¬ ë‹«ê¸°
   â†“
9. ë°ì´í„° ìƒˆë¡œê³ ì¹¨: loadFacilities() í˜¸ì¶œ
```

---

## ğŸ“¦ êµ¬í˜„ íŒŒì¼ ëª©ë¡

### ì‹ ê·œ íŒŒì¼
- `components/modals/FacilityEditModal.tsx` - ì‹œì„¤ í¸ì§‘ ëª¨ë‹¬
- `sql/add_facility_measurement_columns.sql` - DB ë§ˆì´ê·¸ë ˆì´ì…˜
- `claudedocs/ì‹œì„¤_ì¸¡ì •ê¸°ê¸°_ê´€ë¦¬_ì‹œìŠ¤í…œ_ì„¤ê³„.md` - ì„¤ê³„ ë¬¸ì„œ

### ìˆ˜ì • íŒŒì¼
- `components/sections/SupabaseFacilitiesSection.tsx` - ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
- `app/api/outlet-facility/route.ts` - GET/PUT ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- `types/index.ts` - Facility íƒ€ì… í™•ì¥

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 1. ì¹´ë“œ í´ë¦­ ë™ì‘
```
1. ì‚¬ì—…ì¥ í˜ì´ì§€ ì ‘ì†
2. "ì‹œì„¤ ì •ë³´" ì„¹ì…˜ í¼ì¹˜ê¸°
3. ë°°ì¶œì‹œì„¤ ë˜ëŠ” ë°©ì§€ì‹œì„¤ ì¹´ë“œ í´ë¦­
4. âœ… í¸ì§‘ ëª¨ë‹¬ì´ ì—´ë¦¬ëŠ”ì§€ í™•ì¸
```

### 2. ì •ë³´ ì…ë ¥ ë° ì €ì¥
```
1. ëª¨ë‹¬ì—ì„œ ì •ë³´ ì…ë ¥:
   - ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰: 2
   - ë©´ì œì‚¬ìœ : (ë¹„ì›Œë‘ )
   - ë¹„ê³ : "ì •ê¸°ì ê²€ í•„ìš”"
2. [ì €ì¥] ë²„íŠ¼ í´ë¦­
3. âœ… ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ í™•ì¸
4. âœ… ëª¨ë‹¬ì´ ë‹«íˆëŠ”ì§€ í™•ì¸
```

### 3. ë°ì´í„° ì§€ì†ì„±
```
1. ì •ë³´ ì €ì¥ í›„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
2. ê°™ì€ ì‹œì„¤ ì¹´ë“œ í´ë¦­
3. âœ… ì…ë ¥í•œ ì •ë³´ê°€ ëª¨ë‹¬ì— í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
```

### 4. ë©´ì œì‚¬ìœ  ì…ë ¥
```
1. ì¸¡ì •ê¸°ê¸° ìˆ˜ëŸ‰: 0
2. ë©´ì œì‚¬ìœ : "ë°°ì¶œë†ë„ê°€ í—ˆìš©ê¸°ì¤€ì˜ 30% ì´í•˜"
3. [ì €ì¥] í´ë¦­
4. âœ… ì €ì¥ ì„±ê³µ í™•ì¸
```

---

## ğŸ¯ êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: ê¸°ë³¸ ê¸°ëŠ¥ (í•„ìˆ˜)
1. âœ… DB ìŠ¤í‚¤ë§ˆ ì¶”ê°€ (ë§ˆì´ê·¸ë ˆì´ì…˜ SQL)
2. âœ… API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ (GET/PUT)
3. âœ… FacilityEditModal ì»´í¬ë„ŒíŠ¸ ìƒì„±
4. âœ… SupabaseFacilitiesSection ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€

### Phase 2: UX ê°œì„  (ê¶Œì¥)
1. ë¡œë”© ìƒíƒœ í‘œì‹œ
2. ì—ëŸ¬ ì²˜ë¦¬ ë° ì‚¬ìš©ì í”¼ë“œë°±
3. ì…ë ¥ ìœ íš¨ì„± ê²€ì¦
4. ì €ì¥ ì„±ê³µ/ì‹¤íŒ¨ í† ìŠ¤íŠ¸ ë©”ì‹œì§€

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (ì„ íƒ)
1. ë³€ê²½ ì´ë ¥ ì¶”ì 
2. ì¼ê´„ í¸ì§‘ ê¸°ëŠ¥
3. ì—‘ì…€ ë‚´ë³´ë‚´ê¸°
4. í†µê³„ ë° ë¦¬í¬íŠ¸

---

## ğŸ“Š ë°ì´í„° ëª¨ë¸ ê´€ê³„ë„

```
business_info (ì‚¬ì—…ì¥)
  â†“ (1:N)
outlets_facilities (ì‹œì„¤)
  â”œâ”€ business_id (FK)
  â”œâ”€ facility_type: 'discharge' | 'prevention'
  â”œâ”€ outlet_number
  â”œâ”€ facility_name
  â”œâ”€ capacity
  â”œâ”€ quantity
  â”œâ”€ measurement_device_count â† ìƒˆë¡œ ì¶”ê°€
  â”œâ”€ exemption_reason â† ìƒˆë¡œ ì¶”ê°€
  â”œâ”€ remarks â† ìƒˆë¡œ ì¶”ê°€
  â””â”€ last_updated_at â† ìƒˆë¡œ ì¶”ê°€
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] SQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„±
- [ ] Supabaseì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- [ ] API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- [ ] FacilityEditModal ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- [ ] SupabaseFacilitiesSection ìˆ˜ì •
- [ ] íƒ€ì… ì •ì˜ ì—…ë°ì´íŠ¸
- [ ] ì¹´ë“œ í´ë¦­ ë™ì‘ í…ŒìŠ¤íŠ¸
- [ ] ì •ë³´ ì €ì¥/ë¡œë“œ í…ŒìŠ¤íŠ¸
- [ ] í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì§€ì†ì„± í…ŒìŠ¤íŠ¸
- [ ] ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ë¬¸ì„œí™” ì™„ë£Œ

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

ì´ ì„¤ê³„ ë¬¸ì„œë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒ ìˆœì„œë¡œ êµ¬í˜„ì„ ì§„í–‰í•©ë‹ˆë‹¤:

1. **DB ë§ˆì´ê·¸ë ˆì´ì…˜** â†’ SQL ì‹¤í–‰
2. **API êµ¬í˜„** â†’ ì—”ë“œí¬ì¸íŠ¸ ì½”ë“œ ì‘ì„±
3. **ì»´í¬ë„ŒíŠ¸ êµ¬í˜„** â†’ ëª¨ë‹¬ ë° ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸
4. **í…ŒìŠ¤íŠ¸** â†’ ì „ì²´ ê¸°ëŠ¥ ê²€ì¦
5. **ë¬¸ì„œí™”** â†’ ì‚¬ìš©ì ê°€ì´ë“œ ì‘ì„±
