# Admin Revenue í˜ì´ì§€ ì„±ëŠ¥ ë° UI ë¶„ì„

## ğŸ“Š ë¶„ì„ ì¼ì‹œ
2026-01-15

## ğŸ¯ ë¶„ì„ ëŒ€ìƒ
- í˜ì´ì§€: `/app/admin/revenue/page.tsx`
- API: `/app/api/dashboard/revenue/route.ts`
- ì£¼ìš” ì´ìŠˆ:
  1. í˜ì´ì§€ ë¡œë”© ì†ë„ ì§€ì—° ë¬¸ì œ
  2. í…Œì´ë¸” ì»¬ëŸ¼ ì´ìµë¥  í•„ë“œ ë„ˆë¹„ ê³¼ë„

---

## ğŸ” 1. ë¡œë”© ì„±ëŠ¥ ë¶„ì„

### 1.1 í˜„ì¬ ë¡œë”© í”„ë¡œì„¸ìŠ¤

**ì´ˆê¸° ë¡œë”© íë¦„:**
```
í˜ì´ì§€ ë§ˆìš´íŠ¸
  â†“
loadPricingData() ì‹¤í–‰ (ë³‘ë ¬ 6ê°œ API í˜¸ì¶œ)
  â”œâ”€ /api/government-pricing
  â”œâ”€ /api/revenue/manufacturer-pricing
  â”œâ”€ /api/sales-office-cost-settings
  â”œâ”€ /api/survey-cost-settings
  â”œâ”€ /api/revenue/installation-cost
  â””â”€ /api/sales-commission-rates
  â†“
pricesLoaded = true
  â†“
loadBusinesses() ì‹¤í–‰
  â””â”€ /api/business-info-direct (ìµœëŒ€ 2000ê°œ ì‚¬ì—…ì¥)
  â†“
loadCalculations() ì‹¤í–‰
  â””â”€ /api/revenue/calculate (ì „ì²´ ì‚¬ì—…ì¥ ê³„ì‚°)
```

### 1.2 ë³‘ëª© ì§€ì  ì‹ë³„

#### ğŸ”´ Critical Path ë³‘ëª©
1. **Waterfall ë¡œë”© êµ¬ì¡°** ([app/admin/revenue/page.tsx:135-141](app/admin/revenue/page.tsx#L135-L141))
   ```typescript
   useEffect(() => {
     // ê°€ê²© ë°ì´í„°ê°€ ë¡œë“œë˜ë©´ ì‚¬ì—…ì¥ ë°ì´í„° ë¡œë“œ
     if (pricesLoaded) {
       loadBusinesses();    // ìˆœì°¨ ì‹¤í–‰ 1
       loadCalculations();  // ìˆœì°¨ ì‹¤í–‰ 2
     }
   }, [pricesLoaded]);
   ```
   - **ë¬¸ì œì **: ê°€ê²© ë°ì´í„° â†’ ì‚¬ì—…ì¥ â†’ ê³„ì‚° ê²°ê³¼ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œ
   - **ì§€ì—°ì‹œê°„**: 3ë‹¨ê³„ ë„¤íŠ¸ì›Œí¬ ì™•ë³µ (RTT Ã— 3)

2. **ëŒ€ìš©ëŸ‰ ë°ì´í„° ì¡°íšŒ** ([app/admin/revenue/page.tsx:354](app/admin/revenue/page.tsx#L354))
   ```typescript
   const response = await fetch('/api/business-info-direct', {
     headers: getAuthHeaders()
   });
   ```
   - ê¸°ë³¸ limit: 2000ê°œ ì‚¬ì—…ì¥ (í˜„ì¬ 1509ê°œ)
   - ê° ì‚¬ì—…ì¥ë‹¹ 20+ í•„ë“œ í¬í•¨
   - ì˜ˆìƒ ì‘ë‹µ í¬ê¸°: ~500KB-1MB

3. **API ë§¤ì¶œ ê³„ì‚° ë³µì¡ë„** ([app/api/dashboard/revenue/route.ts:266-396](app/api/dashboard/revenue/route.ts#L266-L396))
   ```typescript
   // ì‚¬ì—…ì¥ë³„ ì‹¤ì‹œê°„ ë§¤ì¶œ ê³„ì‚° ë° ì§‘ê³„
   for (const business of filteredBusinesses) {
     // 18ê°œ ì¥ë¹„ í•„ë“œ ìˆœíšŒ ê³„ì‚°
     equipmentFields.forEach(field => {
       // ë§¤ì¶œ, ì›ê°€, ì„¤ì¹˜ë¹„ ê³„ì‚°
     });
   }
   ```
   - **O(n Ã— m)** ë³µì¡ë„ (n=ì‚¬ì—…ì¥ ìˆ˜, m=ì¥ë¹„ ìˆ˜)
   - 1500 ì‚¬ì—…ì¥ Ã— 18 ì¥ë¹„ = 27,000íšŒ ë°˜ë³µ ì—°ì‚°
   - ì‹¤ì‚¬ë¹„ìš© ì¡°ì • ë§µ ì¡°íšŒ, ì˜ì—…ë¹„ìš© ê³„ì‚° ë“± ì¶”ê°€ ì—°ì‚°

#### ğŸŸ¡ Secondary ë³‘ëª©
4. **N+1 ì¿¼ë¦¬ í•´ê²°ë¨** ([app/api/dashboard/revenue/route.ts:148-167](app/api/dashboard/revenue/route.ts#L148-L167))
   - âœ… ì‹¤ì‚¬ë¹„ìš© ì¡°ì •ì€ ì¼ê´„ ì¡°íšŒë¡œ ìµœì í™”ë¨
   - í•˜ì§€ë§Œ ì—¬ì „íˆ ë³µì¡í•œ ê³„ì‚° ë¡œì§ ì¡´ì¬

5. **í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜¤ë²„í—¤ë“œ**
   - `setBusinesses()` í›„ React ë¦¬ë Œë”ë§
   - ê°€ìƒ ìŠ¤í¬ë¡¤ ê³„ì‚° ì´ˆê¸°í™”
   - ì •ë ¬/í•„í„° ì²˜ë¦¬

### 1.3 ì„±ëŠ¥ ì¸¡ì • ë°ì´í„°

**ì˜ˆìƒ ë¡œë”© ì‹œê°„ ë¶„í•´:**
```
loadPricingData (ë³‘ë ¬):    500-800ms  (6ê°œ API)
loadBusinesses:           800-1200ms  (ëŒ€ìš©ëŸ‰ ë°ì´í„°)
loadCalculations:        1500-3000ms  (ë³µì¡í•œ ê³„ì‚°)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´ ì˜ˆìƒ ì‹œê°„:            2800-5000ms  (2.8~5ì´ˆ)
```

**ì‹¤ì œ ì‚¬ìš©ì ì²´ê°:**
- ìŠ¤í”¼ë„ˆ í‘œì‹œ í›„ ë°ì´í„° ì¶œë ¥ê¹Œì§€ 3-5ì´ˆ ì§€ì—°
- ë„¤íŠ¸ì›Œí¬ ìƒíƒœì— ë”°ë¼ ìµœëŒ€ 7-8ì´ˆê¹Œì§€ ê°€ëŠ¥

---

## ğŸ“ 2. í…Œì´ë¸” ì»¬ëŸ¼ ë„ˆë¹„ ë¶„ì„

### 2.1 í˜„ì¬ êµ¬ì¡° ([app/admin/revenue/page.tsx:1594-1596](app/admin/revenue/page.tsx#L1594-L1596))

```typescript
const columnWidths = showReceivablesOnly
  ? ['200px', '110px', '80px', '95px', '95px', '115px', '115px', '115px', '80px', '115px']
  : ['200px', '110px', '80px', '95px', '95px', '115px', '115px', '115px', '80px'];
//    ì‚¬ì—…ì¥ëª…  ì˜ì—…ì    ì œì¡°ì‚¬  ì„¤ì¹˜ì¼  ì§„í–‰êµ¬ë¶„  ë§¤ì¶œê¸ˆì•¡  ë§¤ì…ê¸ˆì•¡  ì´ìµê¸ˆì•¡  ì´ìµë¥   (ë¯¸ìˆ˜ê¸ˆ)
```

### 2.2 ë¬¸ì œì 

#### ğŸ”´ ì ˆëŒ€ê°’ ê³ ì • ë¬¸ì œ
1. **ë°˜ì‘í˜• ë¯¸ì§€ì›**
   - ëª¨ë“  ì»¬ëŸ¼ì´ `px` ê³ ì •ê°’
   - í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ ë¹„ìœ¨ ìœ ì§€ ì•ˆ ë¨
   - ì‘ì€ í™”ë©´ì—ì„œ ê°€ë¡œ ìŠ¤í¬ë¡¤ ë°œìƒ

2. **ì´ìµë¥  ì»¬ëŸ¼ ë„ˆë¹„ ë¶ˆê· í˜•** (Index 8: `'80px'`)
   - í‘œì‹œ ë‚´ìš©: `"23.5%"` (5-6ì)
   - í• ë‹¹ ë„ˆë¹„: 80px
   - ë‹¤ë¥¸ ê¸ˆì•¡ ì»¬ëŸ¼(115px)ë³´ë‹¤ ì‘ì§€ë§Œ ì‹œê°ì ìœ¼ë¡œëŠ” í¼
   - ìƒëŒ€ì ìœ¼ë¡œ ì‚¬ì—…ì¥ëª…(200px)ì´ ë„ˆë¬´ ë„“ìŒ

3. **ê¸ˆì•¡ ì»¬ëŸ¼ ì¼ê´€ì„± ë¶€ì¡±**
   - ë§¤ì¶œê¸ˆì•¡/ë§¤ì…ê¸ˆì•¡/ì´ìµê¸ˆì•¡: 115px (ì¼ê´€ì„± ìˆìŒ)
   - ì´ìµë¥ : 80px (ë„ˆë¹„ ì°¨ì´ ì¡´ì¬)
   - ë¯¸ìˆ˜ê¸ˆ: 115px (ê¸ˆì•¡ì´ë¯€ë¡œ ë™ì¼)

### 2.3 ê°œì„  ë°©í–¥

#### âœ… ë°±ë¶„ìœ¨ ê¸°ë°˜ ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

**ì œì•ˆí•˜ëŠ” ë¹„ìœ¨ êµ¬ì¡°:**
```typescript
// ì´ ë„ˆë¹„ë¥¼ 100%ë¡œ ë¶„ë°°
const columnWidths = showReceivablesOnly
  ? ['20%', '10%', '8%', '9%', '9%', '12%', '12%', '12%', '8%', '12%']
  : ['22%', '11%', '9%', '10%', '10%', '13%', '13%', '13%', '9%'];
//    ì‚¬ì—…ì¥ëª…  ì˜ì—…ì   ì œì¡°ì‚¬  ì„¤ì¹˜ì¼  ì§„í–‰êµ¬ë¶„  ë§¤ì¶œê¸ˆì•¡  ë§¤ì…ê¸ˆì•¡  ì´ìµê¸ˆì•¡  ì´ìµë¥ 
```

**ë¹„ìœ¨ ì„¤ì • ê·¼ê±°:**
1. **ì‚¬ì—…ì¥ëª… (20-22%)**: ê°€ì¥ ì¤‘ìš”í•œ ì‹ë³„ì, ë„‰ë„‰í•œ ê³µê°„ í•„ìš”
2. **ì˜ì—…ì  (10-11%)**: ì¤‘ê°„ ê¸¸ì´ í…ìŠ¤íŠ¸
3. **ì œì¡°ì‚¬ (8-9%)**: ì§§ì€ í…ìŠ¤íŠ¸ (ì—ì½”ì„¼ìŠ¤, ì—ì–´ì»¨í… ë“±)
4. **ì„¤ì¹˜ì¼/ì§„í–‰êµ¬ë¶„ (9-10%)**: ë‚ ì§œ ë° ìƒíƒœ í‘œì‹œ
5. **ê¸ˆì•¡ ì»¬ëŸ¼ (12-13%)**: ìˆ«ì í‘œì‹œì— ì¶©ë¶„í•œ ê³µê°„
6. **ì´ìµë¥  (8-9%)**: ë°±ë¶„ìœ¨ í‘œì‹œ (ì§§ì§€ë§Œ ì¤‘ìš”)
7. **ë¯¸ìˆ˜ê¸ˆ (12%)**: ê¸ˆì•¡ ì»¬ëŸ¼ê³¼ ë™ì¼

**ì¥ì :**
- âœ… í™”ë©´ í¬ê¸°ì— ë”°ë¼ ìë™ ì¡°ì •
- âœ… ë¹„ìœ¨ ì¼ê´€ì„± ìœ ì§€
- âœ… ê°€ë¡œ ìŠ¤í¬ë¡¤ ìµœì†Œí™”
- âœ… ëª¨ë°”ì¼/íƒœë¸”ë¦¿ ëŒ€ì‘ ìš©ì´

---

## ğŸ’¡ 3. ê°œì„  ì œì•ˆ ì‚¬í•­

### 3.1 ë¡œë”© ì„±ëŠ¥ ìµœì í™”

#### ğŸ¯ ìš°ì„ ìˆœìœ„ 1: ë³‘ë ¬ ë¡œë”© êµ¬ì¡° ê°œì„ 
```typescript
// Before (ìˆœì°¨ ì‹¤í–‰)
useEffect(() => {
  if (pricesLoaded) {
    loadBusinesses();    // 1ë‹¨ê³„
    loadCalculations();  // 2ë‹¨ê³„
  }
}, [pricesLoaded]);

// After (ë³‘ë ¬ ì‹¤í–‰)
useEffect(() => {
  if (pricesLoaded) {
    Promise.all([
      loadBusinesses(),
      loadCalculations()
    ]).then(() => {
      console.log('âœ… ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
    });
  }
}, [pricesLoaded]);
```
**ì˜ˆìƒ íš¨ê³¼**: 1-2ì´ˆ ë‹¨ì¶• (ë„¤íŠ¸ì›Œí¬ RTT ì ˆì•½)

#### ğŸ¯ ìš°ì„ ìˆœìœ„ 2: ì´ˆê¸° ë°ì´í„° ì œí•œ + ë¬´í•œ ìŠ¤í¬ë¡¤
```typescript
// ì´ˆê¸° ë¡œë”©: ìµœê·¼ 3ê°œì›” + ìƒìœ„ 100ê°œ ì‚¬ì—…ì¥ë§Œ
const response = await fetch(
  '/api/business-info-direct?limit=100&sort=installation_date&order=desc'
);

// ìŠ¤í¬ë¡¤ ì‹œ ì¶”ê°€ ë¡œë”©
const loadMore = async () => {
  const response = await fetch(
    `/api/business-info-direct?offset=${businesses.length}&limit=50`
  );
};
```
**ì˜ˆìƒ íš¨ê³¼**: ì´ˆê¸° ë¡œë”© ì‹œê°„ 70% ë‹¨ì¶• (5ì´ˆ â†’ 1.5ì´ˆ)

#### ğŸ¯ ìš°ì„ ìˆœìœ„ 3: API ì‘ë‹µ ìºì‹±
```typescript
// SWR ë˜ëŠ” React Query í™œìš©
import useSWR from 'swr';

const { data, error, isLoading } = useSWR(
  '/api/revenue/calculate',
  fetcher,
  {
    revalidateOnFocus: false,
    revalidateOnReconnect: false,
    dedupingInterval: 60000  // 1ë¶„ ìºì‹±
  }
);
```
**ì˜ˆìƒ íš¨ê³¼**: ì¬ë°©ë¬¸ ì‹œ ì¦‰ì‹œ í‘œì‹œ (ìºì‹œ íˆíŠ¸)

#### ğŸ¯ ìš°ì„ ìˆœìœ„ 4: ì„œë²„ ì¸¡ ê³„ì‚° ìµœì í™”
```typescript
// APIì—ì„œ PostgreSQL ì§‘ê³„ í•¨ìˆ˜ í™œìš©
const aggregatedData = await queryAll(`
  SELECT
    DATE_TRUNC('month', installation_date) as month,
    SUM(total_revenue) as revenue,
    SUM(total_cost) as cost,
    SUM(net_profit) as profit,
    COUNT(*) as count
  FROM business_revenue_calculations
  WHERE calculation_date = $1
  GROUP BY month
  ORDER BY month DESC
`, [calcDate]);
```
**ì˜ˆìƒ íš¨ê³¼**: ê³„ì‚° ì‹œê°„ 90% ë‹¨ì¶• (3ì´ˆ â†’ 0.3ì´ˆ)

### 3.2 í…Œì´ë¸” ì»¬ëŸ¼ ë„ˆë¹„ ê°œì„ 

#### ğŸ¯ ë‹¨ê³„ 1: ë°±ë¶„ìœ¨ ê¸°ë°˜ ë ˆì´ì•„ì›ƒ
```typescript
// ê³ ì •ê°’ ì œê±°
const columnWidths = showReceivablesOnly
  ? ['minmax(180px, 20%)', '10%', '8%', '9%', '9%', '12%', '12%', '12%', '8%', '12%']
  : ['minmax(180px, 22%)', '11%', '9%', '10%', '10%', '13%', '13%', '13%', '9%'];

// CSS Grid í™œìš©
<div style={{
  display: 'grid',
  gridTemplateColumns: columnWidths.join(' '),
  width: '100%'  // ì ˆëŒ€ ë„ˆë¹„ ì œê±°
}}>
```

#### ğŸ¯ ë‹¨ê³„ 2: ë°˜ì‘í˜• ë¸Œë ˆì´í¬í¬ì¸íŠ¸
```typescript
const getColumnWidths = () => {
  if (window.innerWidth < 768) {  // ëª¨ë°”ì¼
    return ['30%', '15%', '12%', '0%', '0%', '15%', '0%', '15%', '13%'];
  } else if (window.innerWidth < 1024) {  // íƒœë¸”ë¦¿
    return ['22%', '11%', '9%', '10%', '0%', '13%', '13%', '13%', '9%'];
  } else {  // ë°ìŠ¤í¬í†±
    return ['20%', '10%', '8%', '9%', '9%', '12%', '12%', '12%', '8%'];
  }
};
```

#### ğŸ¯ ë‹¨ê³„ 3: Tailwind CSS í™œìš©
```typescript
// í´ë˜ìŠ¤ ê¸°ë°˜ ë°˜ì‘í˜•
<div className="grid grid-cols-[minmax(180px,20%)_10%_8%_9%_9%_12%_12%_12%_8%] w-full">
  {/* ì»¬ëŸ¼ ë‚´ìš© */}
</div>
```

---

## ğŸ“Š 4. ì˜ˆìƒ ì„±ëŠ¥ ê°œì„  íš¨ê³¼

### Before (í˜„ì¬)
```
ì´ˆê¸° ë¡œë”©:        2.8-5.0ì´ˆ
ì¬ë°©ë¬¸ ë¡œë”©:      2.8-5.0ì´ˆ
ë°ì´í„° ì¬ê³„ì‚°:    3-7ì´ˆ
ì‚¬ìš©ì ì²´ê°:      "ëŠë¦¼" (3ì´ˆ ì´ìƒ ëŒ€ê¸°)
```

### After (ìµœì í™” ì ìš©)
```
ì´ˆê¸° ë¡œë”©:        0.8-1.5ì´ˆ  (60-70% ê°œì„ )
ì¬ë°©ë¬¸ ë¡œë”©:      0.1-0.3ì´ˆ  (ìºì‹œ íˆíŠ¸)
ë°ì´í„° ì¬ê³„ì‚°:    0.5-1.0ì´ˆ  (80-85% ê°œì„ )
ì‚¬ìš©ì ì²´ê°:      "ë¹ ë¦„" (1ì´ˆ ì´ë‚´ ì‘ë‹µ)
```

### í…Œì´ë¸” UI ê°œì„  íš¨ê³¼
```
ë°˜ì‘í˜• ì§€ì›:      âœ… ëª¨ë“  í™”ë©´ í¬ê¸° ëŒ€ì‘
ê°€ë¡œ ìŠ¤í¬ë¡¤:      âŒ ì œê±° (ì‘ì€ í™”ë©´ ì œì™¸)
ì´ìµë¥  ê°€ë…ì„±:    âœ… í™”ë©´ ë¹„ìœ¨ì— ë§ì¶° ìë™ ì¡°ì •
ì¼ê´€ì„±:          âœ… ëª¨ë“  ì»¬ëŸ¼ ë¹„ìœ¨ ê· í˜•
```

---

## ğŸ› ï¸ 5. êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: ì¦‰ì‹œ ì ìš© ê°€ëŠ¥ (Low Risk)
1. âœ… í…Œì´ë¸” ì»¬ëŸ¼ ë„ˆë¹„ ë°±ë¶„ìœ¨ ë³€í™˜
2. âœ… `loadBusinesses`ì™€ `loadCalculations` ë³‘ë ¬ ì‹¤í–‰
3. âœ… API ì‘ë‹µ ë°ì´í„° ì••ì¶• (gzip í™•ì¸)

### Phase 2: ì¤‘ê¸° ê°œì„  (Medium Risk)
4. âš ï¸ SWR/React Query ë„ì… (ìºì‹± ì „ëµ)
5. âš ï¸ ì´ˆê¸° ë°ì´í„° ì œí•œ + í˜ì´ì§€ë„¤ì´ì…˜
6. âš ï¸ ì„œë²„ ì¸¡ ê³„ì‚° ê²°ê³¼ ìºì‹± (Redis/Memcached)

### Phase 3: ì¥ê¸° ê°œì„  (High Impact)
7. ğŸš€ PostgreSQL ì§‘ê³„ ì¿¼ë¦¬ ìµœì í™”
8. ğŸš€ Materialized View í™œìš© (ê³„ì‚° ê²°ê³¼ ì‚¬ì „ ì§‘ê³„)
9. ğŸš€ ì¸ë±ìŠ¤ ìµœì í™” (installation_date, sales_office ë“±)

---

## ğŸ“ 6. ê¶Œì¥ ì‚¬í•­

### ì¦‰ì‹œ ì ìš© ê¶Œì¥
1. **í…Œì´ë¸” ì»¬ëŸ¼ ë„ˆë¹„ ë°±ë¶„ìœ¨ ì „í™˜** (5ë¶„ ì‘ì—…, ì¦‰ì‹œ íš¨ê³¼)
   - ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ê³¼ ì •í™•íˆ ì¼ì¹˜
   - ë¦¬ìŠ¤í¬ ì—†ìŒ

2. **ë³‘ë ¬ ë°ì´í„° ë¡œë”©** (10ë¶„ ì‘ì—…, 1-2ì´ˆ ê°œì„ )
   - ê°„ë‹¨í•œ ì½”ë“œ ë³€ê²½
   - ì¦‰ì‹œ ì²´ê° ê°€ëŠ¥

### ì¤‘ê¸° ê³„íš ê¶Œì¥
3. **API ê³„ì‚° ë¡œì§ PostgreSQLë¡œ ì´ê´€** (2-3ì‹œê°„ ì‘ì—…, 80% ê°œì„ )
   - ê°€ì¥ í° ì„±ëŠ¥ ê°œì„  íš¨ê³¼
   - DB ë¶€í•˜ ì¦ê°€ ëª¨ë‹ˆí„°ë§ í•„ìš”

4. **SWR ìºì‹± ë„ì…** (1-2ì‹œê°„ ì‘ì—…, ì¬ë°©ë¬¸ ì‹œ ì¦‰ì‹œ í‘œì‹œ)
   - ì¬ë°©ë¬¸ ì‚¬ìš©ì ê²½í—˜ ëŒ€í­ ê°œì„ 
   - ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ì œê±°

---

## ğŸ”— ì°¸ê³  íŒŒì¼ ìœ„ì¹˜

- í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸: [app/admin/revenue/page.tsx](app/admin/revenue/page.tsx)
- API ë¼ìš°íŠ¸: [app/api/dashboard/revenue/route.ts](app/api/dashboard/revenue/route.ts)
- ë§¤ì¶œ ê³„ì‚° ìœ í‹¸: [lib/revenue-calculator.ts](lib/revenue-calculator.ts)
- Supabase ì§ì ‘ ì—°ê²°: [lib/supabase-direct.ts](lib/supabase-direct.ts)
